{"version":3,"sources":["redux/articleList/types.ts","redux/articleList/reducer.ts","redux/categoryList/types.ts","redux/categoryList/reducer.ts","util/responsive.ts","redux/isMobile/types.ts","redux/index.ts","redux/isMobile/reducer.ts","redux/loading/types.ts","redux/loading/reducer.ts","redux/user/types.ts","redux/user/reducer.ts","redux/user/actions.ts","redux/loading/actions.ts","service/index.ts","service/user.ts","layout/AuthLayout.tsx","layout/LoadingLayout.tsx","redux/isMobile/actions.ts","router/constants.ts","service/article.ts","service/comment.ts","util/formatTimeStamp.js","util/markdown.js","util/queryString.ts","components/Loading/index.tsx","util/constants.ts","components/ArticleDetail/Comment/CommentList.tsx","components/ArticleDetail/Comment/NewComment.tsx","components/ArticleDetail/index.tsx","redux/articleList/actions.ts","components/EndOfList/index.tsx","components/ArticleList/lazyLoad.js","components/ArticleList/index.tsx","components/Home/animation.js","components/Home/index.tsx","components/Nav/navItems.ts","components/Nav/NavLogo.tsx","components/Nav/DesktopHeader.tsx","components/Nav/LoginModal.tsx","components/Nav/MobileDrawer.tsx","components/Nav/MobileHeader.tsx","components/Nav/RegisterModal.tsx","components/Nav/index.tsx","components/ProfileCard/index.tsx","layout/BaseLayout.tsx","service/category.ts","layout/PublisherLayout.tsx","redux/categoryList/actions.ts","router/index.tsx","App.tsx","index.tsx"],"names":["articleListActionTypes","initialState","articles","undefined","count","reducer","state","arguments","length","action","type","Object","objectSpread","payload","categoryListActionTypes","categories","categoryList_reducer","isMobile","window","innerWidth","test","navigator","userAgent","history","isMobileActionTypes","isMobile_reducer","loadingActionTypes","loading","loading_reducer","userActionTypes","reader","publisher","user_reducer","cookieChecker","remove","createBrowserHistory","rootReducer","combineReducers","articleList","articleListReducer","categoryList","categoryListReducer","isMobileReducer","loadingReducer","user","userReducer","router","connectRouter","store","middlewares","routerMiddleware","middleWareEnhancer","applyMiddleware","apply","createStore","composeWithDevTools","configureStore","logoutReader","saveReader","savePublisher","setLoading","baseUrl","process","codeMessage","200","201","202","204","400","401","403","404","406","410","422","500","502","503","504","service","extend","errorHandler","error","response","errorMessage","data","status","errorText","url","notification","message","concat","description","dispatch","credentials","getResponse","use","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","context","next","wrap","_context","prev","req","stop","_x","_x2","this","getUser","requestBody","method","login","register","getCurrentUser","AuthLayout","fetchCurrentUser","responseBody","get","sent","props","children","Component","connect","react_default","createElement","style","color","textAlign","padding","fontSize","spin","size","setIsMobile","paths","PUBLISHER","PUBLISHER_ID","PAGE","pageNames","paramNames","ARTICLE_ID","CATEGORY_ID","getArticleList","getArticle","likeArticle","createComment","getCommentList","formatTimeStamp","timestamp","dayMinSecFlag","date","Date","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","tocObj","add","text","level","anchor","index","toc","push","toHTML","levelStack","result","addEndUL","addLI","forEach","item","levelIndex","indexOf","unshift","shift","markdown","MarkUtils","classCallCheck","rendererMD","marked","Renderer","heading","raw","table","header","body","highlight","configure","useBR","setOptions","renderer","headerIds","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","code","highlightAuto","value","content","getQueryStringByName","name","location","hash","match","RegExp","Loading","constants","CommentList","commentsJSX","comments","map","comment","react_addons_css_transition_group_default","key","_id","transitionName","transitionAppear","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout","className","cursor","onClick","open","avatar","icon","src","createdOn","TextArea","Input","NewComment","handleChange","e","_this","setState","target","handleSubmit","submitComment","articleId","success","onChange","placeholder","rows","ArticleDetail","possibleConstructorReturn","getPrototypeOf","call","fetchArticle","article","markdownProcessor","isVisitor","loadingArticle","fetchComments","_callee2","_context2","commentList","loadingComments","handleLike","submitLike","_callee3","_context3","likeLoading","isAboutPage","filteredList","filter","warn","Fragment","Helmet","components_Loading","width","categoriesJSX","category","alreadyLiked","likedBy","includes","title","author","props-data-classes","data-author-follow-button","wordCount","theme","meta","numViews","numComments","numLikes","id","dangerouslySetInnerHTML","__html","es_button","HeartFilled","HeartOutlined","Comment_NewComment","Comment_CommentList","saveArticleList","EndOfList","lazyLoad","throttle","viewHeight","innerHeight","document","documentElement","clientHeight","imgs","querySelectorAll","num","i","getBoundingClientRect","top","getAttribute","setAttribute","mapDispatchToProps","ArticleLink","Link","to","publisherId","ArticleList","limit","filterArticles","categoryId","every","handleScroll","Math","max","scrollTop","compatMode","scrollHeight","endOfList","fetchNextArticles","skip","page","articlesToRender","allArticles","slice","addEventListener","removeEventListener","nextProps","newCategoryId","_this2","params","articlesJSX","href","data-src","imgUrl","data-has-lazy-src","alt","ArticleList_ArticleLink","find","categoryName","components_EndOfList","animation","sakura_point_vsh","sakura_point_fsh","fx_common_vsh","bg_fsh","fx_brightbuf_fsh","fx_dirblur_r4_fsh","pp_final_vsh","pp_final_fsh","Vector3","Matrix44","create","x","y","z","dot","v0","v1","cross","v","normalize","l","sqrt","arrayForm","array","Float32Array","createIdentity","loadProjection","aspect","vdeg","near","far","tan","PI","w","loadLookAt","vpos","vlook","vup","frontv","sidev","topv","gl","timeInfo","start","delta","elapsed","renderSpec","height","halfWidth","halfHeight","halfArray","compileShader","shtype","shsrc","retsh","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","errlog","getShaderInfoLog","deleteShader","console","vtxsrc","frgsrc","uniformlist","attrlist","vsh","VERTEX_SHADER","fsh","FRAGMENT_SHADER","prog","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","uniforms","getUniformLocation","attributes","attr","getAttribLocation","useShader","useProgram","enableVertexAttribArray","unuseShader","disableVertexAttribArray","setSize","floor","projection","angle","nearfar","matrix","camera","position","lookat","up","dof","pointFlower","sceneStandBy","BlossomParticle","velocity","Array","rotation","euler","alpha","zkey","createEffectProgram","exunifs","exattrs","ret","unifs","attrs","program","dataArray","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","useEffect","fxobj","srctex","uniform3fv","uResolution","uniform2fv","uDelta","dtxArray","uniform1i","uSrc","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texture","drawEffect","vertexAttribPointer","aPosition","FLOAT","drawArrays","TRIANGLE_STRIP","unuseEffect","prototype","setVelocity","vx","vy","vz","setRotation","rx","ry","rz","setPosition","nx","ny","nz","setEulerAngles","update","dt","et","effectLib","initScene","area","fader","PI2","tmpv3","tmpv","symmetryrand","random","numFlowers","tmpprtcl","particles","initPointFlowers","atan2","renderScene","enable","DEPTH_TEST","bindFramebuffer","FRAMEBUFFER","mainRT","frameBuffer","viewport","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","disable","sceneBg","uniform2f","uTimes","repeatPos","prt","cmp","abs","repeatEuler","prtcl","sort","p0","p1","ipos","positionArrayOffset","ieuler","eulerArrayOffset","imisc","miscArrayOffset","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","uniformMatrix4fv","uProjection","uModelview","uDOF","uFade","DYNAMIC_DRAW","BYTES_PER_ELEMENT","aEuler","aMisc","zpos","offset","uOffset","POINT","renderPointFlowers","bindRT","rt","isclear","wHalfRT0","mkBrightBuf","p","wHalfRT1","dirBlur","uniform4f","uBlurDir","finalComp","uBloom","TEXTURE1","renderPostProcess","setViewports","canvas","rtfunc","rtname","rtw","rth","deleteFramebuffer","deleteRenderbuffer","renderBuffer","deleteTexture","deleteRenderTarget","sizeArray","createFramebuffer","createRenderbuffer","createTexture","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","framebufferTexture2D","COLOR_ATTACHMENT0","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","createRenderTarget","animating","makeCanvasFullScreen","b","d","fullw","clientWidth","scrollWidth","fullh","r","getElementById","getContext","alert","cmnvtxsrc","createEffectLib","prm","getParameter","ALIASED_POINT_SIZE_RANGE","pointSize","min","createPointFlowers","animate","curdate","requestAnimationFrame","c","setTimeout","Index","currentUrl","charAt","substring","forceUpdate","rel","bio","navItems","displayName","NavLogo","Header","Layout","SubMenu","Menu","MenuItemGroup","ItemGroup","DeskTopHeader","navItemsJSX","navItem","menu","Item","updateActivePage","zIndex","minWidth","float","backgroundColor","borderBottom","row","col","Nav_NavLogo","mode","defaultSelectedKeys","selectedKeys","activePage","lineHeight","display","marginRight","setShowLogin","setShowRegister","Login","email","password","readerInfo","emailReg","newState","modal","visible","onCancel","footer","input","marginBottom","prefix","MobileDrawer","userOperation","setShowDrawer","drawer","placement","closable","onClose","MobileHeader","navTitle","MobileHeader_Header","marginTop","Register","confirmPassword","phone","Nav","showLogin","showRegister","showDrawer","Nav_MobileHeader","DesktopHeader","Nav_MobileDrawer","LoginModal","RegisterModal","categoryTags","reload","Content","Footer","Sider","showProfileCard","pageName","routeProps","src_components_Nav","es_layout","background","minHeight","src_components_ProfileCard","back_top","getCategoryList","saveCategoryList","PublisherLayout","ready","initPublisher","initCategoryList","initArticleList","pageTitle","routers","path","exact","render","layout_PublisherLayout","components_Home","layout_BaseLayout","src_components_ArticleList","src_components_ArticleDetail","assign","App","resetIsMobile","resize","log","HashRouter","layout_AuthLayout","layout_LoadingLayout","Switch","Route","ReactDOM","es","src_App"],"mappings":"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","file":"static/js/main.fa635035.chunk.js","sourcesContent":["import { VerboseArticle } from 'global';\n\nexport interface ArticleListState {\n    articles: VerboseArticle[] | undefined; // articles fetched so far\n    count: number; // total count of articles\n}\n\nexport const articleListActionTypes = {\n    SAVE_ARTICLE_LIST: 'SAVE_ARTICLE_LIST',\n};\n\nexport interface SaveArticleListAction {\n    type: typeof articleListActionTypes.SAVE_ARTICLE_LIST;\n    payload: {\n        articles: VerboseArticle[];\n        count: number;\n    };\n}\n\nexport type ArticleListAction = SaveArticleListAction;\n","import {\n    ArticleListAction,\n    articleListActionTypes,\n    ArticleListState,\n} from './types';\n\nconst initialState: ArticleListState = {\n    articles: undefined,\n    count: 0,\n};\n\nexport default (\n    state: ArticleListState = initialState,\n    action: ArticleListAction\n): ArticleListState => {\n    switch (action.type) {\n        case articleListActionTypes.SAVE_ARTICLE_LIST:\n            return {\n                ...state,\n                articles: action.payload.articles,\n                count: action.payload.count,\n            };\n\n        default:\n            return state;\n    }\n};\n","import { ICategory } from 'global';\n\nexport interface CategoryListState {\n    categories: ICategory[] | undefined;\n}\n\nexport const categoryListActionTypes = {\n    SAVE_CATEGORY_LIST: 'SAVE_CATEGORY_LIST',\n};\n\nexport interface SaveCategoryListAction {\n    type: typeof categoryListActionTypes.SAVE_CATEGORY_LIST;\n    payload: {\n        categories: ICategory[];\n    };\n}\n\nexport type CategoryListAction = SaveCategoryListAction;\n","import {\n    CategoryListAction,\n    categoryListActionTypes,\n    CategoryListState,\n} from './types';\n\nconst initialState: CategoryListState = {\n    categories: undefined,\n};\n\nexport default (\n    state: CategoryListState = initialState,\n    action: CategoryListAction\n): CategoryListState => {\n    switch (action.type) {\n        case categoryListActionTypes.SAVE_CATEGORY_LIST:\n            return { ...state, categories: action.payload.categories };\n\n        default:\n            return state;\n    }\n};\n","export function getScrollTop(): number {\n    return Math.max(\n        //chrome\n        document.body.scrollTop,\n        //firefox/IE\n        document.documentElement.scrollTop\n    );\n}\n\nexport function getDocumentHeight(): number {\n    return Math.max(\n        document.body.scrollHeight,\n        document.documentElement.scrollHeight\n    );\n}\n\nexport function getWindowHeight(): number {\n    return document.compatMode === 'CSS1Compat'\n        ? document.documentElement.clientHeight\n        : document.body.clientHeight;\n}\n\nexport function isMobile(): boolean {\n    const threshold = 1240; // screens with width < 1240 px are considered small screens\n    if (window.innerWidth < threshold) {\n        return true;\n    }\n    if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {\n        return true;\n    }\n    return false;\n}\n","export interface IsMobileState {\n    isMobile: boolean;\n}\n\nexport const isMobileActionTypes = {\n    SET_IS_MOBILE: 'SET_IS_MOBILE',\n};\n\nexport interface SetIsMobileAction {\n    type: typeof isMobileActionTypes.SET_IS_MOBILE;\n    payload: {\n        isMobile: boolean;\n    };\n}\n\nexport type IsMobileAction = SetIsMobileAction;\n","import { connectRouter, routerMiddleware } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport { applyMiddleware, combineReducers, createStore, Middleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport articleListReducer from './articleList/reducer';\nimport categoryListReducer from './categoryList/reducer';\nimport isMobileReducer from './isMobile/reducer';\nimport loadingReducer from './loading/reducer';\nimport userReducer from './user/reducer';\n\nexport const history = createBrowserHistory();\n\nconst createRootReducer = (history: ReturnType<typeof createBrowserHistory>) =>\n    combineReducers({\n        articleList: articleListReducer,\n        categoryList: categoryListReducer,\n        isMobile: isMobileReducer,\n        loading: loadingReducer,\n        user: userReducer,\n        router: connectRouter(history),\n    });\n\nconst rootReducer = createRootReducer(history);\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nconst configureStore = () => {\n    const middlewares: Middleware[] = [routerMiddleware(history)];\n    const middleWareEnhancer = applyMiddleware(...middlewares);\n    const store = createStore(rootReducer, composeWithDevTools(middleWareEnhancer));\n    return store;\n};\n\nexport const store = configureStore();\n","import { isMobile } from '../../util/responsive';\nimport { IsMobileAction, isMobileActionTypes, IsMobileState } from './types';\n\nconst initialState: IsMobileState = {\n    isMobile: isMobile(),\n};\n\nexport default (\n    state: IsMobileState = initialState,\n    action: IsMobileAction\n): IsMobileState => {\n    switch (action.type) {\n        case isMobileActionTypes.SET_IS_MOBILE:\n            return {\n                ...state,\n                isMobile: action.payload.isMobile,\n            };\n        default:\n            return state;\n    }\n};\n","export interface LoadingState {\n    loading: boolean;\n}\n\nexport const loadingActionTypes = {\n    SET_LOADING: 'SET_LOADING',\n};\n\nexport interface SetLoadingAction {\n    type: typeof loadingActionTypes.SET_LOADING;\n    payload: {\n        loading: boolean;\n    };\n}\n\nexport type LoadingAction = SetLoadingAction;\n","import { LoadingAction, loadingActionTypes, LoadingState } from './types';\n\nconst initialState: LoadingState = {\n    loading: false,\n};\n\nexport default (\n    state: LoadingState = initialState,\n    action: LoadingAction\n): LoadingState => {\n    switch (action.type) {\n        case loadingActionTypes.SET_LOADING:\n            return {\n                ...state,\n                loading: action.payload.loading,\n            };\n        default:\n            return state;\n    }\n};\n","import { IUser } from 'global';\n\nexport interface UserState {\n    reader: IUser | undefined;\n    publisher: IUser | undefined;\n}\n\nexport const userActionTypes = {\n    LOGOUT_READER: 'LOGOUT_READER',\n    SAVE_READER: 'SAVE_READER',\n    SAVE_PUBLISHER: 'SAVE_PUBLISHER',\n};\n\nexport interface LogoutReaderAction {\n    type: typeof userActionTypes.LOGOUT_READER;\n}\n\nexport interface SaveReaderAction {\n    type: typeof userActionTypes.SAVE_READER;\n    payload: {\n        reader: IUser;\n    };\n}\n\nexport interface SavePublisherAction {\n    type: typeof userActionTypes.SAVE_PUBLISHER;\n    payload: {\n        publisher: IUser;\n    };\n}\n\nexport type UserAction = LogoutReaderAction | SaveReaderAction | SavePublisherAction;\n","import cookieChecker from 'js-cookie';\n\nimport {\n    SavePublisherAction,\n    SaveReaderAction,\n    UserAction,\n    userActionTypes,\n    UserState,\n} from './types';\n\nconst initialState: UserState = {\n    reader: undefined,\n    publisher: undefined,\n};\n\nexport default (state: UserState = initialState, action: UserAction): UserState => {\n    switch (action.type) {\n        case userActionTypes.LOGOUT_READER:\n            cookieChecker.remove('jwt');\n            return {\n                ...state,\n                reader: undefined,\n            };\n        case userActionTypes.SAVE_READER:\n            return {\n                ...state,\n                reader: (action as SaveReaderAction).payload.reader,\n            };\n        case userActionTypes.SAVE_PUBLISHER:\n            return {\n                ...state,\n                publisher: (action as SavePublisherAction).payload.publisher,\n            };\n        default:\n            return state;\n    }\n};\n","import { IUser } from 'global';\n\nimport {\n    LogoutReaderAction,\n    SavePublisherAction,\n    SaveReaderAction,\n    userActionTypes,\n} from './types';\n\nexport const logoutReader = (): LogoutReaderAction => {\n    return {\n        type: userActionTypes.LOGOUT_READER,\n    };\n};\n\nexport const saveReader = (reader: IUser): SaveReaderAction => {\n    return {\n        type: userActionTypes.SAVE_READER,\n        payload: { reader },\n    };\n};\n\nexport const savePublisher = (publisher: IUser): SavePublisherAction => {\n    return {\n        type: userActionTypes.SAVE_PUBLISHER,\n        payload: { publisher },\n    };\n};\n","import { loadingActionTypes, SetLoadingAction } from './types';\n\nexport const setLoading = (loading: boolean): SetLoadingAction => {\n    return {\n        type: loadingActionTypes.SET_LOADING,\n        payload: { loading },\n    };\n};\n","/* eslint-disable no-console */\nimport { notification } from 'antd';\nimport { extend } from 'umi-request';\n\nimport { store } from '../redux';\nimport { setLoading } from '../redux/loading/actions';\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nconst codeMessage: { [code: number]: string } = {\n    200: 'The request has succeeded and the server has returned requested data.',\n    201: 'The request has succeeded and a resource has been created or modified as a result.',\n    202: 'The request has been received but not yet acted upon.',\n    204: 'Deletion has succeeded',\n    400: 'The server could not understand the request due to invalid syntax.',\n    401: 'The client must authenticate itself to get the requested response.',\n    403: 'The client does not have access rights to the content.',\n    404: 'The server can not find the requested resource.',\n    406: 'The server cannot find any content that conforms to the criteria given by the user agent.',\n    410: 'The content has been permanently deleted from the server, with no forwarding address.',\n    422: 'The request was well-formed but was unable to be followed due to semantic errors.',\n    500: 'The server has encountered a situation it does not know how to handle.',\n    502: 'Bad gateway',\n    503: 'Service unavailable: The server is down for maintenance or is overloaded.',\n    504: 'Gateway timeout',\n};\n\nconst errorHandler = (error: {\n    response: Response;\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    data: string | object;\n}): Response => {\n    const { response, data } = error;\n    const errorMessage: string = data as string;\n    if (response && response.status) {\n        const errorText = errorMessage || codeMessage[response.status];\n        const { status, url } = response;\n        notification.error({\n            message: `Request error: ${status}: ${url}`,\n            description: errorText,\n        });\n    } else if (!response) {\n        notification.error({\n            description: 'Your Internet has a problem. Cannot connect to the server',\n            message: 'Network error',\n        });\n        store.dispatch(setLoading(false));\n    }\n    return response;\n};\n\nconst service = extend({\n    errorHandler, // default error handler\n    credentials: 'include', // include cookies in requests\n    getResponse: true,\n});\n\nservice.use(async (context, next) => {\n    if (\n        context.req.url === `${baseUrl}/login` ||\n        context.req.url === `${baseUrl}/register` ||\n        context.req.url === `${baseUrl}/getArticle` ||\n        context.req.url === `${baseUrl}/getCommentList` ||\n        context.req.url === `${baseUrl}/likeArticle`\n    ) {\n        await next();\n    } else {\n        store.dispatch(setLoading(true));\n        await next();\n        store.dispatch(setLoading(false));\n    }\n});\n\nexport default service;\n","import { IUser } from 'global';\nimport { RequestResponse } from 'umi-request';\n\nimport service from './index';\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nexport interface GetUserRequestBody {}\n\nexport interface GetUserResponseBody {\n    user: IUser;\n}\n\nexport const getUser = (\n    requestBody: GetUserRequestBody\n): Promise<RequestResponse<GetUserResponseBody>> => {\n    return service(`${baseUrl}/getUser`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface LoginRequestBody {\n    email: string;\n    password: string;\n}\n\nexport interface LoginResponseBody {\n    user: IUser;\n}\n\nexport const login = (\n    requestBody: LoginRequestBody\n): Promise<RequestResponse<LoginResponseBody>> => {\n    return service(`${baseUrl}/login`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface RegisterRequestBody {\n    email: string;\n    password: string;\n    confirmPassword: string;\n    name: string;\n    phone: string;\n}\n\nexport interface RegisterResponseBody {\n    user: IUser;\n}\n\nexport const register = (\n    requestBody: RegisterRequestBody\n): Promise<RequestResponse<RegisterResponseBody>> => {\n    return service(`${baseUrl}/register`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface GetCurrentUserResponseBody {\n    user: IUser;\n}\n\nexport const getCurrentUser = (): Promise<\n    RequestResponse<GetCurrentUserResponseBody>\n> => {\n    return service(`${baseUrl}/getCurrentUser`, {\n        method: 'GET',\n    });\n};\n","import cookieChecker from 'js-cookie';\nimport React, { Component } from 'react';\n\nimport { store } from '../redux';\nimport { saveReader } from '../redux/user/actions';\nimport { getCurrentUser, GetCurrentUserResponseBody } from '../service/user';\n\nclass AuthLayout extends Component {\n    // eslint-disable-next-line react/no-deprecated\n    componentWillMount(): void {\n        this.fetchCurrentUser();\n    }\n\n    fetchCurrentUser = async (): Promise<void> => {\n        const cookieExists: boolean =\n            typeof cookieChecker.get('jwt') === 'string' &&\n            (cookieChecker.get('jwt') as string).length > 0;\n        if (cookieExists) {\n            const response = await getCurrentUser();\n            if (response.data) {\n                const responseBody: GetCurrentUserResponseBody = response.data;\n                store.dispatch(saveReader(responseBody.user));\n            } else {\n                cookieChecker.remove('jwt');\n            }\n        }\n    };\n\n    render(): React.ReactNode {\n        return this.props.children;\n    }\n}\n\nexport default AuthLayout;\n","import { Spin } from 'antd';\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { RootState } from '../redux';\n\ninterface OwnProps {}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    loading: boolean;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    loading: state.loading.loading,\n});\n\ntype LoadingLayoutProps = OwnProps & DispatchProps & StateProps;\n\nconst LoadingLayout: React.FC<LoadingLayoutProps> = props => {\n    if (props.loading === false) {\n        return props.children as JSX.Element;\n    }\n    const style: React.CSSProperties = {\n        color: '#999',\n        textAlign: 'center',\n        padding: 50,\n        fontSize: 16,\n    };\n    return (\n        <div style={style}>\n            <Spin size=\"large\" />\n        </div>\n    );\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(LoadingLayout);\n","import { isMobileActionTypes, SetIsMobileAction } from './types';\n\nexport const setIsMobile = (isMobile: boolean): SetIsMobileAction => {\n    return {\n        type: isMobileActionTypes.SET_IS_MOBILE,\n        payload: { isMobile },\n    };\n};\n","export const paths = {\n    PUBLISHER: 'publisher',\n    PUBLISHER_ID: 'publisherId',\n    PAGE: 'page',\n};\n\nexport const pageNames = {\n    HOME: 'home',\n    ARTICLE_LIST: 'articleList',\n    ARTICLE_DETAIL: 'articleDetail',\n    ABOUT: 'about',\n};\n\nexport const paramNames = {\n    ARTICLE_ID: 'articleId',\n    CATEGORY_ID: 'categoryId',\n};\n\nexport type PageName =\n    | typeof pageNames.HOME\n    | typeof pageNames.ARTICLE_LIST\n    | typeof pageNames.ARTICLE_DETAIL;\n\nexport interface RouteParams {\n    publisherId: string;\n    page: PageName;\n}\n","import { IArticle, ICategory, IUser, VerboseArticle } from 'global';\nimport { RequestResponse } from 'umi-request';\n\nimport service from './index';\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nexport interface GetArticleListRequestBody {\n    user: IUser['_id'];\n    isVisitor?: true;\n    pagination?: {\n        page: number; // default is 1\n        limit: 5; // default is 5\n    };\n    filter?: {\n        isAboutPage?: IArticle['isAboutPage'];\n        isDraft?: IArticle['isDraft'];\n        keyword?: string;\n        categoryId?: ICategory['_id'];\n    };\n}\n\nexport interface GetArticleListResponseBody {\n    count: number;\n    articleList: VerboseArticle[];\n}\n\nexport const getArticleList = (\n    requestBody: GetArticleListRequestBody\n): Promise<RequestResponse<GetArticleListResponseBody>> => {\n    return service(`${baseUrl}/getArticleList`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface GetArticleRequestBody {\n    _id: IArticle['_id'];\n    isVisitor: true;\n}\n\nexport interface GetArticleResponseBody {\n    article: VerboseArticle;\n}\n\nexport const getArticle = (\n    requestBody: GetArticleRequestBody\n): Promise<RequestResponse<GetArticleResponseBody>> => {\n    return service(`${baseUrl}/getArticle`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface LikeArticleRequestBody {\n    _id: IArticle['_id'];\n}\n\nexport interface LikeArticleListResponseBody {\n    article: VerboseArticle;\n}\n\nexport const likeArticle = (\n    requestBody: LikeArticleRequestBody\n): Promise<RequestResponse<LikeArticleListResponseBody>> => {\n    return service(`${baseUrl}/likeArticle`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n","import { IArticle, IComment, VerboseComment } from 'global';\nimport { RequestResponse } from 'umi-request';\n\nimport service from './index';\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nexport interface CreateCommentRequestBody {\n    articleId: IArticle['_id'];\n    content: IComment['content'];\n}\n\nexport interface CreateCommentResponseBody {\n    comment: IComment;\n}\n\nexport const createComment = (\n    requestBody: CreateCommentRequestBody\n): Promise<RequestResponse<CreateCommentResponseBody>> => {\n    return service(`${baseUrl}/createComment`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n\nexport interface GetCommentListRequestBody {\n    articleId: IArticle['_id'];\n    isVisitor?: true;\n}\n\nexport interface GetCommentListResponseBody {\n    count: number;\n    commentList: VerboseComment[];\n}\n\nexport const getCommentList = (\n    requestBody: GetCommentListRequestBody\n): Promise<RequestResponse<GetCommentListResponseBody>> => {\n    return service(`${baseUrl}/getCommentList`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n","// 时间 格式化成 2018-12-12 12:12:00\nexport function formatTimeStamp(timestamp, dayMinSecFlag) {\n    const date = new Date(timestamp);\n    const Y = date.getFullYear() + '-';\n    const M =\n        (date.getMonth() + 1 < 10\n            ? '0' + (date.getMonth() + 1)\n            : date.getMonth() + 1) + '-';\n    const D =\n        date.getDate() < 10 ? '0' + date.getDate() + ' ' : date.getDate() + ' ';\n    const h =\n        date.getHours() < 10 ? '0' + date.getHours() + ':' : date.getHours() + ':';\n    const m =\n        date.getMinutes() < 10\n            ? '0' + date.getMinutes() + ':'\n            : date.getMinutes() + ':';\n    const s = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\n    if (!dayMinSecFlag) {\n        return Y + M + D;\n    }\n    return Y + M + D + h + m + s;\n}\n","import highlight from 'highlight.js';\nimport marked from 'marked';\n\nconst tocObj = {\n    add: function (text, level) {\n        const anchor = `#toc${level}${++this.index}`;\n        this.toc.push({ anchor: anchor, level: level, text: text });\n        return anchor;\n    },\n    toHTML: function () {\n        let levelStack = [];\n        let result = '';\n        const addStartUL = () => {\n            result += '<ul class=\"anchor-ul\" id=\"anchor-fix\">';\n        };\n        const addEndUL = () => {\n            result += '</ul>\\n';\n        };\n        const addLI = (anchor, text) => {\n            result +=\n                '<li><a class=\"toc-link\" href=\"#' +\n                anchor +\n                '\">' +\n                text +\n                '<a></li>\\n';\n        };\n\n        this.toc.forEach(function (item) {\n            let levelIndex = levelStack.indexOf(item.level);\n            // 没有找到相应level的ul标签，则将li放入新增的ul中\n            if (levelIndex === -1) {\n                levelStack.unshift(item.level);\n                addStartUL();\n                addLI(item.anchor, item.text);\n            } else if (levelIndex === 0) {\n                // 找到了相应level的ul标签，并且在栈顶的位置则直接将li放在此ul下\n                addLI(item.anchor, item.text);\n            } else {\n                // 找到了相应level的ul标签，但是不在栈顶位置，需要将之前的所有level出栈并且打上闭合标签，最后新增li\n                while (levelIndex--) {\n                    levelStack.shift();\n                    addEndUL();\n                }\n                addLI(item.anchor, item.text);\n            }\n        });\n        // 如果栈中还有level，全部出栈打上闭合标签\n        while (levelStack.length) {\n            levelStack.shift();\n            addEndUL();\n        }\n        // 清理先前数据供下次使用\n        this.toc = [];\n        this.index = 0;\n        return result;\n    },\n    toc: [],\n    index: 0,\n};\n\nclass MarkUtils {\n    constructor() {\n        this.rendererMD = new marked.Renderer();\n        // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n        this.rendererMD.heading = function (text, level, raw) {\n            const anchor = tocObj.add(text, level);\n            return `<h${level} id=${anchor}>${text}</h${level}>\\n`;\n        };\n        this.rendererMD.table = function (header, body) {\n            return (\n                '<table class=\"table\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">' +\n                header +\n                body +\n                '</table>'\n            );\n        };\n        highlight.configure({ useBR: true });\n        marked.setOptions({\n            renderer: this.rendererMD,\n            headerIds: false,\n            gfm: true,\n            tables: true,\n            breaks: false,\n            pedantic: false,\n            sanitize: false,\n            smartLists: true,\n            smartypants: false,\n            highlight: function (code) {\n                return highlight.highlightAuto(code).value;\n            },\n        });\n    }\n\n    async marked(data) {\n        if (data) {\n            let content = await marked(data);\n            let toc = tocObj.toHTML();\n            return { content: content, toc: toc };\n        } else {\n            return null;\n        }\n    }\n}\n\nconst markdown = new MarkUtils();\n\nexport default markdown;\n","/**\n * @return QueryString as an array\n */\nexport function getQueryString(): '' | RegExpMatchArray {\n    const result = window.location.search.match(\n        new RegExp('[?&][^?&]+=[^?&]+', 'g')\n    );\n    if (result === null) {\n        return '';\n    }\n    for (let i = 0; i < result.length; i++) {\n        result[i] = result[i].substring(1);\n    }\n    return result;\n}\n\n/**\n * @param {string} name - a query string's name\n * @return a query string according to name\n */\nexport function getQueryStringByName(name: string): string | null {\n    const result = window.location.hash.match(\n        new RegExp('[?&]' + name + '=([^&]+)', 'i')\n    );\n    if (result === null || result.length < 1) {\n        return null;\n    }\n    return result[1];\n}\n","import { Spin } from 'antd';\nimport React from 'react';\n\nconst Loading: React.FC = () => {\n    const style: React.CSSProperties = {\n        color: '#999',\n        textAlign: 'center',\n        padding: 50,\n        fontSize: 16,\n    };\n    return (\n        <div style={style}>\n            <Spin size=\"large\" />\n        </div>\n    );\n};\n\nexport default Loading;\n","let BLOGGY_PUBLISHER_BASE_URL = 'https://bloggy2020.herokuapp.com/publisher';\nlet BLOGGY_READER_BASE_URL = 'https://bloggy2020.herokuapp.com/reader/#/publisher';\nif (process.env.NODE_ENV === 'development') {\n    BLOGGY_PUBLISHER_BASE_URL = 'http://localhost:8000';\n    BLOGGY_READER_BASE_URL = 'http://localhost:2000/#/publisher';\n}\nexport default { BLOGGY_PUBLISHER_BASE_URL, BLOGGY_READER_BASE_URL };\n","import './index.less';\n\nimport { Avatar } from 'antd';\nimport { VerboseComment } from 'global';\nimport React from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\n\nimport constants from '../../../util/constants';\nimport { formatTimeStamp } from '../../../util/formatTimeStamp';\n\ninterface CommentListProps {\n    comments: VerboseComment[];\n}\n\nconst CommentList: React.FC<CommentListProps> = props => {\n    const commentsJSX: JSX.Element[] = props.comments.map(comment => (\n        <ReactCSSTransitionGroup\n            key={comment._id}\n            transitionName=\"example\"\n            transitionAppear={true}\n            transitionAppearTimeout={1000}\n            transitionEnterTimeout={1000}\n            transitionLeaveTimeout={1000}\n        >\n            <div className=\"item\">\n                <div className=\"item-header\">\n                    <div\n                        className=\"author\"\n                        style={{ cursor: 'pointer' }}\n                        onClick={() =>\n                            window.open(\n                                `${constants.BLOGGY_READER_BASE_URL}/${comment.user._id}`,\n                                '_blank'\n                            )\n                        }\n                    >\n                        <div className=\"avator\">\n                            <Avatar\n                                size=\"large\"\n                                icon=\"user\"\n                                src={comment.user.avatar}\n                            />\n                        </div>\n                    </div>\n                    <div className=\"info\">\n                        <div className=\"name\">{comment.user.name}</div>\n                        <div className=\"time\">\n                            {comment.createdOn\n                                ? formatTimeStamp(comment.createdOn, true)\n                                : ''}\n                        </div>\n                    </div>\n                </div>\n                <div className=\"comment-detail\">{comment.content}</div>\n            </div>\n        </ReactCSSTransitionGroup>\n    ));\n\n    return (\n        <div className=\"comment-list\">\n            <div className=\"top-title\">\n                <span>{props.comments.length} comments</span>\n            </div>\n            {commentsJSX}\n        </div>\n    );\n};\n\nexport default CommentList;\n","import './index.less';\n\nimport { Avatar, Input, notification } from 'antd';\nimport React, { Component } from 'react';\nconst { TextArea } = Input;\nimport { IArticle, IUser } from 'global';\nimport { connect } from 'react-redux';\n\nimport { RootState } from '../../../redux';\nimport { createComment } from '../../../service/comment';\n\ninterface OwnProps {\n    articleId: IArticle['_id'];\n}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    reader: IUser | undefined;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    reader: state.user.reader,\n});\n\ntype NewCommentProps = OwnProps & DispatchProps & StateProps;\n\ninterface NewCommentState {\n    content: string;\n}\n\nclass NewComment extends Component<NewCommentProps, NewCommentState> {\n    state = { content: '' };\n\n    handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\n        this.setState({ ...this.state, content: e.target.value });\n    };\n\n    // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars\n    handleSubmit = (e: React.MouseEvent<HTMLElement, MouseEvent>): void => {\n        this.submitComment();\n    };\n\n    submitComment = async (): Promise<void> => {\n        if (this.state.content === '') {\n            notification.error({ message: 'Comment cannot be empty.' });\n        }\n        if (!this.props.reader) {\n            notification.error({ message: 'Please log in first.' });\n        }\n        const response = await createComment({\n            articleId: this.props.articleId,\n            content: this.state.content,\n        });\n        if (response.data) {\n            notification.success({\n                message: 'Comment submitted. Will be posted after approval.',\n            });\n        }\n    };\n\n    render(): JSX.Element {\n        const { reader } = this.props;\n        return (\n            <div className=\"comment\">\n                <div className=\"avatar\">\n                    {reader ? (\n                        <Avatar\n                            className=\"auth-logo\"\n                            size={50}\n                            src={reader.avatar}\n                        />\n                    ) : (\n                        <Avatar className=\"auth-logo\" size={50} icon=\"user\" />\n                    )}\n                </div>\n                <h3>{reader ? reader.name : ''}</h3>\n                <TextArea\n                    className=\"textarea\"\n                    name=\"content\"\n                    value={this.state.content}\n                    onChange={this.handleChange}\n                    placeholder=\"Pease be considerate and polite in your comment.\"\n                    rows={4}\n                />\n                <div className=\"new-comment write-function-block\">\n                    <div onClick={this.handleSubmit} className=\"btn btn-send\">\n                        Submit\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(NewComment);\n","/* eslint-disable max-lines */\nimport './index.less';\nimport './marked.css';\n\nimport { HeartFilled, HeartOutlined } from '@ant-design/icons';\nimport { Avatar, Button, Icon, notification } from 'antd';\nimport { IArticle, IUser, VerboseArticle, VerboseComment } from 'global';\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\n\nimport { RootState } from '../../redux';\nimport { paramNames, paths, RouteParams } from '../../router/constants';\nimport {\n    getArticle,\n    GetArticleResponseBody,\n    likeArticle,\n} from '../../service/article';\nimport { getCommentList, GetCommentListResponseBody } from '../../service/comment';\nimport { formatTimeStamp } from '../../util/formatTimeStamp';\nimport markdown from '../../util/markdown';\nimport { getQueryStringByName } from '../../util/queryString';\nimport Loading from '../Loading';\nimport CommentList from './Comment/CommentList';\nimport NewComment from './Comment/NewComment';\n\ninterface OwnProps {\n    isAboutPage?: boolean;\n}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    publisher: IUser;\n    reader: IUser | undefined;\n    isMobile: boolean;\n    articleList: VerboseArticle[];\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    publisher: state.user.publisher as IUser,\n    reader: state.user.reader,\n    isMobile: state.isMobile.isMobile,\n    articleList: state.articleList.articles as VerboseArticle[],\n});\n\ntype ArticleDetailProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\ntype VerboseMarkdownArticle = VerboseArticle & { toc: string };\n\ninterface ArticleDetailState {\n    articleId: IArticle['_id'];\n    article: VerboseMarkdownArticle | undefined;\n    comments: VerboseComment[] | undefined;\n    loadingComments: boolean;\n    loadingArticle: boolean;\n    likeLoading: boolean;\n}\n\nclass ArticleDetail extends Component<ArticleDetailProps, ArticleDetailState> {\n    constructor(props: ArticleDetailProps) {\n        super(props);\n        let articleId = '';\n        if (this.props.isAboutPage) {\n            const filteredList = this.props.articleList.filter(\n                article => article.isAboutPage\n            );\n            if (filteredList.length === 0) {\n                notification.warn({ message: 'About page is under construction.' });\n                this.props.history.push(\n                    `/${paths.PUBLISHER}/${this.props.publisher._id}`\n                );\n            } else {\n                articleId = filteredList[0]._id;\n            }\n        } else {\n            articleId = getQueryStringByName(paramNames.ARTICLE_ID) as string;\n        }\n        this.state = {\n            articleId,\n            article: undefined,\n            comments: undefined,\n            loadingComments: true,\n            loadingArticle: true,\n            likeLoading: false,\n        };\n    }\n\n    componentDidMount(): void {\n        if (this.state.articleId !== '') {\n            this.fetchArticle();\n            this.fetchComments();\n        }\n    }\n\n    fetchArticle = async (): Promise<void> => {\n        const response = await getArticle({\n            _id: this.state.articleId as string,\n            isVisitor: true,\n        });\n        if (response.data) {\n            const responseBody: GetArticleResponseBody = response.data;\n            const article: VerboseMarkdownArticle = {\n                ...responseBody.article,\n                toc: '',\n            };\n\n            const markdownProcessor = await markdown.marked(article.content);\n            article.content = markdownProcessor ? markdownProcessor.content : '';\n            article.toc = markdownProcessor ? markdownProcessor.toc : '';\n            this.setState({\n                ...this.state,\n                article: article,\n                loadingArticle: false,\n            });\n        }\n    };\n\n    fetchComments = async (): Promise<void> => {\n        const response = await getCommentList({\n            articleId: this.state.articleId as string,\n        });\n        if (response.data) {\n            const responseBody: GetCommentListResponseBody = response.data;\n            this.setState({\n                ...this.state,\n                comments: responseBody.commentList,\n                loadingComments: false,\n            });\n        }\n    };\n\n    handleLike = (): void => {\n        this.submitLike();\n    };\n\n    submitLike = async (): Promise<void> => {\n        this.setState({ ...this.state, likeLoading: true });\n        const response = await likeArticle({\n            _id: this.state.articleId as string,\n        });\n        if (response.data) {\n            notification.success({ message: 'Liked!' });\n        }\n        this.setState({ ...this.state, likeLoading: false });\n    };\n\n    render(): JSX.Element {\n        if (this.state.loadingArticle || this.state.loadingComments) {\n            return (\n                <React.Fragment>\n                    <Helmet>\n                        <title>Bloggy Reader</title>\n                    </Helmet>\n                    <Loading />\n                </React.Fragment>\n            );\n        }\n        const width = this.props.isMobile ? '100%' : '75%';\n        const article = (this.state.article as unknown) as VerboseMarkdownArticle;\n        const comments = (this.state.comments as unknown) as VerboseComment[];\n        const categoriesJSX = article.categories.map(category => (\n            <span key={category._id} className=\"tag\">\n                {category.name}\n            </span>\n        ));\n        const alreadyLiked =\n            this.state.article &&\n            this.state.article.likedBy &&\n            this.props.reader &&\n            typeof this.props.reader._id === 'string' &&\n            this.state.article.likedBy.includes(this.props.reader._id);\n        return (\n            <React.Fragment>\n                <Helmet>\n                    <title>{article.title}</title>\n                </Helmet>\n                <div className=\"article clearfix\">\n                    <div className=\"detail fl\" style={{ width: width }}>\n                        <div className=\"header\">\n                            <div className=\"title\">{article.title}</div>\n                            <div className=\"author\">\n                                <div className=\"avatar\">\n                                    <Avatar\n                                        className=\"auth-logo\"\n                                        src={article.author.avatar}\n                                        size={50}\n                                        icon=\"user\"\n                                    />\n                                </div>{' '}\n                                <div className=\"info\">\n                                    <span className=\"name\">\n                                        <span>{article.author.name}</span>\n                                    </span>\n                                    <div\n                                        props-data-classes=\"user-follow-button-header\"\n                                        data-author-follow-button=\"\"\n                                    />\n                                    <div className=\"meta\">\n                                        <span className=\"publish-time\">\n                                            {article.createdOn\n                                                ? formatTimeStamp(\n                                                      article.createdOn,\n                                                      true\n                                                  )\n                                                : ''}\n                                        </span>\n                                        <span className=\"wordage\">\n                                            {' '}\n                                            {article.wordCount} Words{' '}\n                                        </span>\n                                        <span className=\"views-count\">\n                                            {' '}\n                                            <Icon type=\"eye\" theme=\"outlined\" />{' '}\n                                            {article.meta\n                                                ? article.meta.numViews\n                                                : '-'}{' '}\n                                        </span>\n                                        <span className=\"comments-count\">\n                                            {' '}\n                                            <Icon\n                                                type=\"message\"\n                                                theme=\"outlined\"\n                                            />{' '}\n                                            {article.meta\n                                                ? article.meta.numComments\n                                                : '-'}{' '}\n                                        </span>\n                                        <span className=\"likes-count\">\n                                            {' '}\n                                            <Icon\n                                                type=\"heart\"\n                                                theme=\"outlined\"\n                                            />{' '}\n                                            {article.meta\n                                                ? article.meta.numLikes\n                                                : '-'}{' '}\n                                        </span>\n                                    </div>\n                                </div>\n                                <div className=\"tags \" title=\"Categories\">\n                                    <Icon type=\"tags\" theme=\"outlined\" />\n                                    {categoriesJSX}\n                                </div>\n                                <span className=\"clearfix\" />\n                            </div>\n                        </div>\n\n                        <div className=\"content\">\n                            <div\n                                id=\"content\"\n                                className=\"article-detail\"\n                                dangerouslySetInnerHTML={{\n                                    __html: article.content ? article.content : '',\n                                }}\n                            />\n                        </div>\n                        <div className=\"heart\">\n                            {alreadyLiked ? (\n                                <Button\n                                    type=\"danger\"\n                                    size=\"large\"\n                                    loading={this.state.likeLoading}\n                                    onClick={this.handleLike}\n                                >\n                                    <HeartFilled />\n                                    Liked\n                                </Button>\n                            ) : (\n                                <Button\n                                    type=\"danger\"\n                                    size=\"large\"\n                                    loading={this.state.likeLoading}\n                                    onClick={this.handleLike}\n                                >\n                                    <HeartOutlined />\n                                    Like\n                                </Button>\n                            )}\n                        </div>\n                        <NewComment articleId={article._id} />\n                        <CommentList comments={comments} />\n                    </div>\n                    {!this.props.isMobile ? (\n                        <div\n                            style={{ width: '23%' }}\n                            className=\"article-right fr anchor\"\n                            dangerouslySetInnerHTML={{\n                                __html: article.toc ? article.toc : '',\n                            }}\n                        />\n                    ) : (\n                        ''\n                    )}\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(ArticleDetail);\n","import { VerboseArticle } from 'global';\n\nimport { articleListActionTypes, SaveArticleListAction } from './types';\n\nexport const saveArticleList = ({\n    articles,\n    count,\n}: {\n    articles: VerboseArticle[];\n    count: number;\n}): SaveArticleListAction => {\n    return {\n        type: articleListActionTypes.SAVE_ARTICLE_LIST,\n        payload: { articles, count },\n    };\n};\n","import React, { CSSProperties } from 'react';\n\nconst EndOfList: React.FC = props => {\n    const style: CSSProperties = {\n        color: '#999',\n        textAlign: 'center',\n        padding: 50,\n        fontSize: 16,\n    };\n    return <div style={style}> --------- I have a bottom line :) --------- </div>;\n};\n\nexport default EndOfList;\n","import { throttle } from 'throttle-debounce';\n\nconst throttleDelay = 1000;\n\n// 用新的 throttle 包装 scroll 的回调\nconst lazyLoad = throttle(throttleDelay, () => {\n    // 获取可视区域的高度\n    const viewHeight = window.innerHeight || document.documentElement.clientHeight;\n\n    // 获取所有的图片标签\n    const imgs = document.querySelectorAll('#list .wrap-img img');\n\n    // num 用于统计当前显示到了哪一张图片，避免每次都从第一张图片开始检查是否露出\n    let num = 0;\n\n    for (let i = num; i < imgs.length; i++) {\n        // 用可视区域高度减去元素顶部距离可视区域顶部的高度\n        let distance = viewHeight - imgs[i].getBoundingClientRect().top;\n\n        // 如果可视区域高度大于等于元素顶部距离可视区域顶部的高度，说明元素露出\n        if (distance >= 100) {\n            // 给元素写入真实的 src，展示图片\n            let hasLaySrc = imgs[i].getAttribute('data-has-lazy-src');\n            if (hasLaySrc === 'false') {\n                imgs[i].src = imgs[i].getAttribute('data-src');\n                imgs[i].setAttribute('data-has-lazy-src', true);\n            }\n\n            // 前 i 张图片已经加载完毕，下次从第 i+1 张开始检查是否露出\n            num = i + 1;\n        }\n    }\n});\n\nexport default lazyLoad;\n","/* eslint-disable max-lines */\nimport './index.less';\n\nimport { Icon } from 'antd';\nimport { ICategory, IUser, VerboseArticle } from 'global';\nimport React, { Component } from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport { RootState } from '../../redux';\nimport { saveArticleList } from '../../redux/articleList/actions';\nimport { pageNames, paramNames, paths, RouteParams } from '../../router/constants';\nimport { formatTimeStamp } from '../../util/formatTimeStamp';\nimport { getQueryStringByName } from '../../util/queryString';\nimport {\n    getDocumentHeight,\n    getScrollTop,\n    getWindowHeight,\n} from '../../util/responsive';\nimport EndOfList from '../EndOfList';\nimport lazyLoad from './lazyLoad';\n\ninterface OwnProps {}\n\ninterface DispatchProps {\n    saveArticleList: typeof saveArticleList;\n}\n\nconst mapDispatchToProps = {\n    saveArticleList,\n};\n\ninterface StateProps {\n    articleList: VerboseArticle[];\n    categoryList: ICategory[];\n    count: number;\n    publisher: IUser;\n    loading: boolean;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    articleList: state.articleList.articles as VerboseArticle[],\n    categoryList: state.categoryList.categories as ICategory[],\n    count: state.articleList.count,\n    publisher: state.user.publisher as IUser,\n    loading: state.loading.loading,\n});\n\ntype ArticleListProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\ninterface ArticleListState {\n    page: number;\n    categoryId: ICategory['_id'] | null;\n    allArticles: VerboseArticle[]; // do not use redux articles, because redux does not do filtering based on categoryId\n    articlesToRender: VerboseArticle[];\n    endOfList: boolean;\n}\n\ninterface ArticleLinkProps {\n    publisherId: string;\n    articleId: string;\n    title?: boolean;\n}\n\nconst ArticleLink: React.FC<ArticleLinkProps> = props => {\n    return (\n        <Link\n            className={props.title ? 'title' : ''}\n            target=\"_blank\"\n            to={`/${paths.PUBLISHER}/${props.publisherId}/${pageNames.ARTICLE_DETAIL}/?${paramNames.ARTICLE_ID}=${props.articleId}`}\n        >\n            {props.children}\n        </Link>\n    );\n};\n\nclass ArticleList extends Component<ArticleListProps, ArticleListState> {\n    readonly limit = 5;\n\n    constructor(props: ArticleListProps) {\n        super(props);\n        const categoryId: ICategory['_id'] | null = getQueryStringByName(\n            paramNames.CATEGORY_ID\n        );\n\n        let allArticles: VerboseArticle[];\n        if (categoryId === null) {\n            allArticles = this.props.articleList;\n        } else {\n            allArticles = this.filterArticles(categoryId);\n        }\n        this.state = {\n            page: 0,\n            categoryId,\n            allArticles,\n            articlesToRender: allArticles.slice(0, 5),\n            endOfList: !(allArticles.length > 5),\n        };\n    }\n\n    // filter articles by categoryId\n    filterArticles = (categoryId: ICategory['_id']): VerboseArticle[] => {\n        return this.props.articleList.filter(\n            article =>\n                !article.categories.every(category => category._id !== categoryId)\n        );\n    };\n\n    componentDidMount(): void {\n        window.addEventListener('scroll', this.handleScroll);\n    }\n\n    componentWillUnmount(): void {\n        window.removeEventListener('scroll', this.handleScroll);\n    }\n\n    // eslint-disable-next-line no-unused-vars, @typescript-eslint/no-unused-vars, react/no-deprecated\n    componentWillReceiveProps(nextProps: ArticleListProps): void {\n        const newCategoryId: ICategory['_id'] | null = getQueryStringByName(\n            paramNames.CATEGORY_ID\n        );\n        if (newCategoryId !== this.state.categoryId) {\n            let allArticles: VerboseArticle[];\n            if (newCategoryId === null) {\n                allArticles = this.props.articleList;\n            } else {\n                allArticles = this.filterArticles(newCategoryId);\n            }\n            this.setState({\n                ...this.state,\n                page: 0,\n                categoryId: newCategoryId,\n                allArticles,\n                articlesToRender: allArticles.slice(0, 5),\n                endOfList: allArticles.length > 5,\n            });\n        }\n    }\n\n    handleScroll = (): void => {\n        // lazy loading images\n        lazyLoad();\n\n        // fetch more articles if there is any\n        if (getScrollTop() + getWindowHeight() > getDocumentHeight() - 100) {\n            // 如果不是已经没有数据了，都可以继续滚动加载\n            if (this.state.endOfList === false && this.props.loading === false) {\n                this.fetchNextArticles();\n            }\n        }\n    };\n\n    fetchNextArticles = (): void => {\n        const limit = 5;\n        const page = this.state.page + 1;\n        const skip = page * limit;\n        const articlesToRender = this.state.allArticles.slice(0, skip + limit);\n        this.setState({\n            ...this.state,\n            articlesToRender,\n            endOfList: !(articlesToRender.length < this.state.allArticles.length),\n        });\n        lazyLoad();\n    };\n\n    render(): JSX.Element {\n        const publisherId = this.props.match.params.publisherId;\n\n        const articlesJSX: JSX.Element[] = this.state.articlesToRender.map(\n            article => (\n                <ReactCSSTransitionGroup\n                    key={article._id}\n                    transitionName=\"example\"\n                    transitionAppear={true}\n                    transitionAppearTimeout={1000}\n                    transitionEnterTimeout={1000}\n                    transitionLeaveTimeout={1000}\n                >\n                    <li key={article._id} className=\"have-img\">\n                        <a className=\"wrap-img\" href=\"/\" target=\"_blank\">\n                            <img\n                                className=\"img-blur-done\"\n                                data-src={article.imgUrl}\n                                data-has-lazy-src=\"false\"\n                                src={article.imgUrl}\n                                alt={`article image url for ${article.title}`}\n                            />\n                        </a>\n                        <div className=\"content\">\n                            <ArticleLink\n                                publisherId={publisherId}\n                                articleId={article._id}\n                                title\n                            >\n                                {article.title}\n                            </ArticleLink>\n                            <p className=\"abstract\">{article.description}</p>\n                            <div className=\"meta\">\n                                <ArticleLink\n                                    publisherId={publisherId}\n                                    articleId={article._id}\n                                >\n                                    <Icon type=\"eye\" theme=\"outlined\" />{' '}\n                                    {article.meta ? article.meta.numViews : 0}\n                                </ArticleLink>{' '}\n                                <ArticleLink\n                                    publisherId={publisherId}\n                                    articleId={article._id}\n                                >\n                                    <Icon type=\"message\" theme=\"outlined\" />{' '}\n                                    {article.meta ? article.meta.numComments : 0}\n                                </ArticleLink>{' '}\n                                <ArticleLink\n                                    publisherId={publisherId}\n                                    articleId={article._id}\n                                >\n                                    <Icon type=\"heart\" theme=\"outlined\" />{' '}\n                                    {article.meta ? article.meta.numLikes : 0}\n                                </ArticleLink>\n                                <span className=\"time\">\n                                    {article.createdOn\n                                        ? formatTimeStamp(article.createdOn, true)\n                                        : ''}\n                                </span>\n                            </div>\n                        </div>\n                    </li>\n                </ReactCSSTransitionGroup>\n            )\n        );\n\n        const category = this.props.categoryList.find(\n            category => category._id === this.state.categoryId\n        );\n        const categoryName = category ? category.name : '';\n\n        return (\n            <div className=\"left\">\n                {this.state.categoryId ? (\n                    <h3 className=\"left-title\">\n                        Articles related to {categoryName}:{' '}\n                    </h3>\n                ) : (\n                    ''\n                )}\n                <ul className=\"note-list\" id=\"list\">\n                    {articlesJSX}\n                </ul>\n                {this.state.endOfList ? <EndOfList /> : ''}\n            </div>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(ArticleList);\n","/* eslint-disable */\nexport default () => {\n    let sakura_point_vsh = `\nuniform mat4 uProjection;\nuniform mat4 uModelview;\nuniform vec3 uResolution;\nuniform vec3 uOffset;\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\nattribute vec3 aPosition;\nattribute vec3 aEuler;\nattribute vec2 aMisc; //x:size, y:fade\n\nvarying vec3 pposition;\nvarying float psize;\nvarying float palpha;\nvarying float pdist;\n\n//varying mat3 rotMat;\nvarying vec3 normX;\nvarying vec3 normY;\nvarying vec3 normZ;\nvarying vec3 normal;\n\nvarying float diffuse;\nvarying float specular;\nvarying float rstop;\nvarying float distancefade;\n\nvoid main(void) {\n    // Projection is based on vertical angle\n    vec4 pos = uModelview * vec4(aPosition + uOffset, 1.0);\n    gl_Position = uProjection * pos;\n    gl_PointSize = aMisc.x * uProjection[1][1] / -pos.z * uResolution.y * 0.5;\n\n    pposition = pos.xyz;\n    psize = aMisc.x;\n    pdist = length(pos.xyz);\n    palpha = smoothstep(0.0, 1.0, (pdist - 0.1) / uFade.z);\n\n    vec3 elrsn = sin(aEuler);\n    vec3 elrcs = cos(aEuler);\n    mat3 rotx = mat3(\n        1.0, 0.0, 0.0,\n        0.0, elrcs.x, elrsn.x,\n        0.0, -elrsn.x, elrcs.x\n    );\n    mat3 roty = mat3(\n        elrcs.y, 0.0, -elrsn.y,\n        0.0, 1.0, 0.0,\n        elrsn.y, 0.0, elrcs.y\n    );\n    mat3 rotz = mat3(\n        elrcs.z, elrsn.z, 0.0,\n        -elrsn.z, elrcs.z, 0.0,\n        0.0, 0.0, 1.0\n    );\n    mat3 rotmat = rotx * roty * rotz;\n    normal = rotmat[2];\n\n    mat3 trrotm = mat3(\n        rotmat[0][0], rotmat[1][0], rotmat[2][0],\n        rotmat[0][1], rotmat[1][1], rotmat[2][1],\n        rotmat[0][2], rotmat[1][2], rotmat[2][2]\n    );\n    normX = trrotm[0];\n    normY = trrotm[1];\n    normZ = trrotm[2];\n\n    const vec3 lit = vec3(0.6917144638660746, 0.6917144638660746, -0.20751433915982237);\n\n    float tmpdfs = dot(lit, normal);\n    if(tmpdfs < 0.0) {\n        normal = -normal;\n        tmpdfs = dot(lit, normal);\n    }\n    diffuse = 0.4 + tmpdfs;\n\n    vec3 eyev = normalize(-pos.xyz);\n    if(dot(eyev, normal) > 0.0) {\n        vec3 hv = normalize(eyev + lit);\n        specular = pow(max(dot(hv, normal), 0.0), 20.0);\n    }\n    else {\n        specular = 0.0;\n    }\n\n    rstop = clamp((abs(pdist - uDOF.x) - uDOF.y) / uDOF.z, 0.0, 1.0);\n    rstop = pow(rstop, 0.5);\n    //-0.69315 = ln(0.5)\n    distancefade = min(1.0, exp((uFade.x - pdist) * 0.69315 / uFade.y));\n}`;\n\n    let sakura_point_fsh = `\n#ifdef GL_ES\n//precision mediump float;\nprecision highp float;\n#endif\n\nuniform vec3 uDOF;  //x:focus distance, y:focus radius, z:max radius\nuniform vec3 uFade; //x:start distance, y:half distance, z:near fade start\n\nconst vec3 fadeCol = vec3(0.08, 0.03, 0.06);\n\nvarying vec3 pposition;\nvarying float psize;\nvarying float palpha;\nvarying float pdist;\n\n//varying mat3 rotMat;\nvarying vec3 normX;\nvarying vec3 normY;\nvarying vec3 normZ;\nvarying vec3 normal;\n\nvarying float diffuse;\nvarying float specular;\nvarying float rstop;\nvarying float distancefade;\n\nfloat ellipse(vec2 p, vec2 o, vec2 r) {\n    vec2 lp = (p - o) / r;\n    return length(lp) - 1.0;\n}\n\nvoid main(void) {\n    vec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n    vec3 d = vec3(0.0, 0.0, -1.0);\n    float nd = normZ.z; //dot(-normZ, d);\n    if(abs(nd) < 0.0001) discard;\n\n    float np = dot(normZ, p);\n    vec3 tp = p + d * np / nd;\n    vec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n    //angle = 15 degree\n    const float flwrsn = 0.258819045102521;\n    const float flwrcs = 0.965925826289068;\n    mat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n    vec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\n    float r;\n    if(flwrp.x < 0.0) {\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n    }\n    else {\n        r = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n    }\n\n    if(r > rstop) discard;\n\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n    float grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n    col *= vec3(1.0, grady, grady);\n    col *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n    col = col * diffuse + specular;\n\n    col = mix(fadeCol, col, distancefade);\n\n    float alpha = (rstop > 0.001)? (0.5 - r / (rstop * 2.0)) : 1.0;\n    alpha = smoothstep(0.0, 1.0, alpha) * palpha;\n\n    gl_FragColor = vec4(col * 0.5, alpha);\n}`;\n\n    let fx_common_vsh = `\nuniform vec3 uResolution;\nattribute vec2 aPosition;\n\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n}`;\n\n    let bg_fsh = `\n#ifdef GL_ES\n//precision mediump float;\nprecision highp float;\n#endif\n\nuniform vec2 uTimes;\n\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\n\nvoid main(void) {\n    vec3 col;\n    float c;\n    vec2 tmpv = texCoord * vec2(0.8, 1.0) - vec2(0.95, 1.0);\n    c = exp(-pow(length(tmpv) * 1.8, 2.0));\n    col = mix(vec3(0.02, 0.0, 0.03), vec3(0.96, 0.98, 1.0) * 1.5, c);\n    gl_FragColor = vec4(col * 0.5, 1.0);\n}`;\n\n    let fx_brightbuf_fsh = `\n#ifdef GL_ES\n//precision mediump float;\nprecision highp float;\n#endif\nuniform sampler2D uSrc;\nuniform vec2 uDelta;\n\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\n\nvoid main(void) {\n    vec4 col = texture2D(uSrc, texCoord);\n    gl_FragColor = vec4(col.rgb * 2.0 - vec3(0.5), 1.0);\n}`;\n\n    let fx_dirblur_r4_fsh = `\n#ifdef GL_ES\n//precision mediump float;\nprecision highp float;\n#endif\nuniform sampler2D uSrc;\nuniform vec2 uDelta;\nuniform vec4 uBlurDir; //dir(x, y), stride(z, w)\n\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\n\nvoid main(void) {\n    vec4 col = texture2D(uSrc, texCoord);\n    col = col + texture2D(uSrc, texCoord + uBlurDir.xy * uDelta);\n    col = col + texture2D(uSrc, texCoord - uBlurDir.xy * uDelta);\n    col = col + texture2D(uSrc, texCoord + (uBlurDir.xy + uBlurDir.zw) * uDelta);\n    col = col + texture2D(uSrc, texCoord - (uBlurDir.xy + uBlurDir.zw) * uDelta);\n    gl_FragColor = col / 5.0;\n}`;\n\n    let pp_final_vsh = `\nuniform vec3 uResolution;\nattribute vec2 aPosition;\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    texCoord = aPosition.xy * 0.5 + vec2(0.5, 0.5);\n    screenCoord = aPosition.xy * vec2(uResolution.z, 1.0);\n}`;\n\n    let pp_final_fsh = `\n#ifdef GL_ES\n//precision mediump float;\nprecision highp float;\n#endif\nuniform sampler2D uSrc;\nuniform sampler2D uBloom;\nuniform vec2 uDelta;\nvarying vec2 texCoord;\nvarying vec2 screenCoord;\nvoid main(void) {\n    vec4 srccol = texture2D(uSrc, texCoord) * 2.0;\n    vec4 bloomcol = texture2D(uBloom, texCoord);\n    vec4 col;\n    col = srccol + bloomcol * (vec4(1.0) + srccol);\n    col *= smoothstep(1.0, 0.0, pow(length((texCoord - vec2(0.5)) * 2.0), 1.2) * 0.5);\n    col = pow(col, vec4(0.45454545454545)); //(1.0 / 2.2)\n\n    gl_FragColor = vec4(col.rgb, 1.0);\n    gl_FragColor.a = 1.0;\n}`;\n\n    let Vector3 = {};\n    let Matrix44 = {};\n    Vector3.create = function (x, y, z) {\n        return { x: x, y: y, z: z };\n    };\n    Vector3.dot = function (v0, v1) {\n        return v0.x * v1.x + v0.y * v1.y + v0.z * v1.z;\n    };\n    Vector3.cross = function (v, v0, v1) {\n        v.x = v0.y * v1.z - v0.z * v1.y;\n        v.y = v0.z * v1.x - v0.x * v1.z;\n        v.z = v0.x * v1.y - v0.y * v1.x;\n    };\n    Vector3.normalize = function (v) {\n        let l = v.x * v.x + v.y * v.y + v.z * v.z;\n        if (l > 0.00001) {\n            l = 1.0 / Math.sqrt(l);\n            v.x *= l;\n            v.y *= l;\n            v.z *= l;\n        }\n    };\n    Vector3.arrayForm = function (v) {\n        if (v.array) {\n            v.array[0] = v.x;\n            v.array[1] = v.y;\n            v.array[2] = v.z;\n        } else {\n            v.array = new Float32Array([v.x, v.y, v.z]);\n        }\n        return v.array;\n    };\n    Matrix44.createIdentity = function () {\n        return new Float32Array([\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n            0.0,\n            0.0,\n            0.0,\n            0.0,\n            1.0,\n        ]);\n    };\n    Matrix44.loadProjection = function (m, aspect, vdeg, near, far) {\n        let h = near * Math.tan(((vdeg * Math.PI) / 180.0) * 0.5) * 2.0;\n        let w = h * aspect;\n\n        m[0] = (2.0 * near) / w;\n        m[1] = 0.0;\n        m[2] = 0.0;\n        m[3] = 0.0;\n\n        m[4] = 0.0;\n        m[5] = (2.0 * near) / h;\n        m[6] = 0.0;\n        m[7] = 0.0;\n\n        m[8] = 0.0;\n        m[9] = 0.0;\n        m[10] = -(far + near) / (far - near);\n        m[11] = -1.0;\n\n        m[12] = 0.0;\n        m[13] = 0.0;\n        m[14] = (-2.0 * far * near) / (far - near);\n        m[15] = 0.0;\n    };\n    Matrix44.loadLookAt = function (m, vpos, vlook, vup) {\n        let frontv = Vector3.create(\n            vpos.x - vlook.x,\n            vpos.y - vlook.y,\n            vpos.z - vlook.z\n        );\n        Vector3.normalize(frontv);\n        let sidev = Vector3.create(1.0, 0.0, 0.0);\n        Vector3.cross(sidev, vup, frontv);\n        Vector3.normalize(sidev);\n        let topv = Vector3.create(1.0, 0.0, 0.0);\n        Vector3.cross(topv, frontv, sidev);\n        Vector3.normalize(topv);\n\n        m[0] = sidev.x;\n        m[1] = topv.x;\n        m[2] = frontv.x;\n        m[3] = 0.0;\n\n        m[4] = sidev.y;\n        m[5] = topv.y;\n        m[6] = frontv.y;\n        m[7] = 0.0;\n\n        m[8] = sidev.z;\n        m[9] = topv.z;\n        m[10] = frontv.z;\n        m[11] = 0.0;\n\n        m[12] = -(vpos.x * m[0] + vpos.y * m[4] + vpos.z * m[8]);\n        m[13] = -(vpos.x * m[1] + vpos.y * m[5] + vpos.z * m[9]);\n        m[14] = -(vpos.x * m[2] + vpos.y * m[6] + vpos.z * m[10]);\n        m[15] = 1.0;\n    };\n\n    let timeInfo = {\n        start: 0,\n        prev: 0,\n        delta: 0,\n        elapsed: 0,\n    };\n\n    let gl;\n    let renderSpec = {\n        width: 0,\n        height: 0,\n        aspect: 1,\n        array: new Float32Array(3),\n        halfWidth: 0,\n        halfHeight: 0,\n        halfArray: new Float32Array(3),\n    };\n    renderSpec.setSize = function (w, h) {\n        renderSpec.width = w;\n        renderSpec.height = h;\n        renderSpec.aspect = renderSpec.width / renderSpec.height;\n        renderSpec.array[0] = renderSpec.width;\n        renderSpec.array[1] = renderSpec.height;\n        renderSpec.array[2] = renderSpec.aspect;\n\n        renderSpec.halfWidth = Math.floor(w / 2);\n        renderSpec.halfHeight = Math.floor(h / 2);\n        renderSpec.halfArray[0] = renderSpec.halfWidth;\n        renderSpec.halfArray[1] = renderSpec.halfHeight;\n        renderSpec.halfArray[2] = renderSpec.halfWidth / renderSpec.halfHeight;\n    };\n\n    function deleteRenderTarget(rt) {\n        gl.deleteFramebuffer(rt.frameBuffer);\n        gl.deleteRenderbuffer(rt.renderBuffer);\n        gl.deleteTexture(rt.texture);\n    }\n\n    function createRenderTarget(w, h) {\n        let ret = {\n            width: w,\n            height: h,\n            sizeArray: new Float32Array([w, h, w / h]),\n            dtxArray: new Float32Array([1.0 / w, 1.0 / h]),\n        };\n        ret.frameBuffer = gl.createFramebuffer();\n        ret.renderBuffer = gl.createRenderbuffer();\n        ret.texture = gl.createTexture();\n\n        gl.bindTexture(gl.TEXTURE_2D, ret.texture);\n        gl.texImage2D(\n            gl.TEXTURE_2D,\n            0,\n            gl.RGBA,\n            w,\n            h,\n            0,\n            gl.RGBA,\n            gl.UNSIGNED_BYTE,\n            null\n        );\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, ret.frameBuffer);\n        gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0,\n            gl.TEXTURE_2D,\n            ret.texture,\n            0\n        );\n\n        gl.bindRenderbuffer(gl.RENDERBUFFER, ret.renderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, w, h);\n        gl.framebufferRenderbuffer(\n            gl.FRAMEBUFFER,\n            gl.DEPTH_ATTACHMENT,\n            gl.RENDERBUFFER,\n            ret.renderBuffer\n        );\n\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n        return ret;\n    }\n\n    function compileShader(shtype, shsrc) {\n        let retsh = gl.createShader(shtype);\n\n        gl.shaderSource(retsh, shsrc);\n        gl.compileShader(retsh);\n\n        if (!gl.getShaderParameter(retsh, gl.COMPILE_STATUS)) {\n            let errlog = gl.getShaderInfoLog(retsh);\n            gl.deleteShader(retsh);\n            console.error(errlog);\n            return null;\n        }\n        return retsh;\n    }\n\n    function createShader(vtxsrc, frgsrc, uniformlist, attrlist) {\n        let vsh = compileShader(gl.VERTEX_SHADER, vtxsrc);\n        let fsh = compileShader(gl.FRAGMENT_SHADER, frgsrc);\n\n        if (vsh == null || fsh == null) {\n            return null;\n        }\n\n        let prog = gl.createProgram();\n        gl.attachShader(prog, vsh);\n        gl.attachShader(prog, fsh);\n\n        gl.deleteShader(vsh);\n        gl.deleteShader(fsh);\n\n        gl.linkProgram(prog);\n        if (!gl.getProgramParameter(prog, gl.LINK_STATUS)) {\n            let errlog = gl.getProgramInfoLog(prog);\n            console.error(errlog);\n            return null;\n        }\n\n        if (uniformlist) {\n            prog.uniforms = {};\n            for (let i = 0; i < uniformlist.length; i++) {\n                prog.uniforms[uniformlist[i]] = gl.getUniformLocation(\n                    prog,\n                    uniformlist[i]\n                );\n            }\n        }\n\n        if (attrlist) {\n            prog.attributes = {};\n            for (let i = 0; i < attrlist.length; i++) {\n                let attr = attrlist[i];\n                prog.attributes[attr] = gl.getAttribLocation(prog, attr);\n            }\n        }\n\n        return prog;\n    }\n\n    function useShader(prog) {\n        gl.useProgram(prog);\n        for (let attr in prog.attributes) {\n            gl.enableVertexAttribArray(prog.attributes[attr]);\n        }\n    }\n\n    function unuseShader(prog) {\n        for (let attr in prog.attributes) {\n            gl.disableVertexAttribArray(prog.attributes[attr]);\n        }\n        gl.useProgram(null);\n    }\n\n    let projection = {\n        angle: 60,\n        nearfar: new Float32Array([0.1, 100.0]),\n        matrix: Matrix44.createIdentity(),\n    };\n    let camera = {\n        position: Vector3.create(0, 0, 100),\n        lookat: Vector3.create(0, 0, 0),\n        up: Vector3.create(0, 1, 0),\n        dof: Vector3.create(10.0, 4.0, 8.0),\n        matrix: Matrix44.createIdentity(),\n    };\n\n    let pointFlower = {};\n    let sceneStandBy = false;\n\n    let BlossomParticle = function () {\n        this.velocity = new Array(3);\n        this.rotation = new Array(3);\n        this.position = new Array(3);\n        this.euler = new Array(3);\n        this.size = 1.0;\n        this.alpha = 1.0;\n        this.zkey = 0.0;\n    };\n\n    BlossomParticle.prototype.setVelocity = function (vx, vy, vz) {\n        this.velocity[0] = vx;\n        this.velocity[1] = vy;\n        this.velocity[2] = vz;\n    };\n\n    BlossomParticle.prototype.setRotation = function (rx, ry, rz) {\n        this.rotation[0] = rx;\n        this.rotation[1] = ry;\n        this.rotation[2] = rz;\n    };\n\n    BlossomParticle.prototype.setPosition = function (nx, ny, nz) {\n        this.position[0] = nx;\n        this.position[1] = ny;\n        this.position[2] = nz;\n    };\n\n    BlossomParticle.prototype.setEulerAngles = function (rx, ry, rz) {\n        this.euler[0] = rx;\n        this.euler[1] = ry;\n        this.euler[2] = rz;\n    };\n\n    BlossomParticle.prototype.setSize = function (s) {\n        this.size = s;\n    };\n\n    BlossomParticle.prototype.update = function (dt, et) {\n        this.position[0] += this.velocity[0] * dt;\n        this.position[1] += this.velocity[1] * dt;\n        this.position[2] += this.velocity[2] * dt;\n\n        this.euler[0] += this.rotation[0] * dt;\n        this.euler[1] += this.rotation[1] * dt;\n        this.euler[2] += this.rotation[2] * dt;\n    };\n\n    function createPointFlowers() {\n        let prm = gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);\n        renderSpec.pointSize = { min: prm[0], max: prm[1] };\n\n        let vtxsrc = sakura_point_vsh;\n        let frgsrc = sakura_point_fsh;\n\n        pointFlower.program = createShader(\n            vtxsrc,\n            frgsrc,\n            ['uProjection', 'uModelview', 'uResolution', 'uOffset', 'uDOF', 'uFade'],\n            ['aPosition', 'aEuler', 'aMisc']\n        );\n\n        useShader(pointFlower.program);\n        pointFlower.offset = new Float32Array([0.0, 0.0, 0.0]);\n        pointFlower.fader = Vector3.create(0.0, 10.0, 0.0);\n\n        pointFlower.numFlowers = 1600;\n        pointFlower.particles = new Array(pointFlower.numFlowers);\n        pointFlower.dataArray = new Float32Array(\n            pointFlower.numFlowers * (3 + 3 + 2)\n        );\n        pointFlower.positionArrayOffset = 0;\n        pointFlower.eulerArrayOffset = pointFlower.numFlowers * 3;\n        pointFlower.miscArrayOffset = pointFlower.numFlowers * 6;\n\n        pointFlower.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n        unuseShader(pointFlower.program);\n\n        for (let i = 0; i < pointFlower.numFlowers; i++) {\n            pointFlower.particles[i] = new BlossomParticle();\n        }\n    }\n\n    function initPointFlowers() {\n        pointFlower.area = Vector3.create(20.0, 20.0, 20.0);\n        pointFlower.area.x = pointFlower.area.y * renderSpec.aspect;\n\n        pointFlower.fader.x = 10.0;\n        pointFlower.fader.y = pointFlower.area.z;\n        pointFlower.fader.z = 0.1;\n\n        let PI2 = Math.PI * 2.0;\n        let tmpv3 = Vector3.create(0, 0, 0);\n        let tmpv = 0;\n        let symmetryrand = function () {\n            return Math.random() * 2.0 - 1.0;\n        };\n        for (let i = 0; i < pointFlower.numFlowers; i++) {\n            let tmpprtcl = pointFlower.particles[i];\n\n            tmpv3.x = symmetryrand() * 0.3 + 0.8;\n            tmpv3.y = symmetryrand() * 0.2 - 1.0;\n            tmpv3.z = symmetryrand() * 0.3 + 0.5;\n            Vector3.normalize(tmpv3);\n            tmpv = 2.0 + Math.random() * 1.0;\n            tmpprtcl.setVelocity(tmpv3.x * tmpv, tmpv3.y * tmpv, tmpv3.z * tmpv);\n\n            tmpprtcl.setRotation(\n                symmetryrand() * PI2 * 0.5,\n                symmetryrand() * PI2 * 0.5,\n                symmetryrand() * PI2 * 0.5\n            );\n\n            tmpprtcl.setPosition(\n                symmetryrand() * pointFlower.area.x,\n                symmetryrand() * pointFlower.area.y,\n                symmetryrand() * pointFlower.area.z\n            );\n\n            tmpprtcl.setEulerAngles(\n                Math.random() * Math.PI * 2.0,\n                Math.random() * Math.PI * 2.0,\n                Math.random() * Math.PI * 2.0\n            );\n\n            tmpprtcl.setSize(0.9 + Math.random() * 0.1);\n        }\n    }\n\n    function renderPointFlowers() {\n        let PI2 = Math.PI * 2.0;\n        let repeatPos = function (prt, cmp, limit) {\n            if (Math.abs(prt.position[cmp]) - prt.size * 0.5 > limit) {\n                if (prt.position[cmp] > 0) {\n                    prt.position[cmp] -= limit * 2.0;\n                } else {\n                    prt.position[cmp] += limit * 2.0;\n                }\n            }\n        };\n        let repeatEuler = function (prt, cmp) {\n            prt.euler[cmp] = prt.euler[cmp] % PI2;\n            if (prt.euler[cmp] < 0.0) {\n                prt.euler[cmp] += PI2;\n            }\n        };\n\n        for (let i = 0; i < pointFlower.numFlowers; i++) {\n            let prtcl = pointFlower.particles[i];\n            prtcl.update(timeInfo.delta, timeInfo.elapsed);\n            repeatPos(prtcl, 0, pointFlower.area.x);\n            repeatPos(prtcl, 1, pointFlower.area.y);\n            repeatPos(prtcl, 2, pointFlower.area.z);\n            repeatEuler(prtcl, 0);\n            repeatEuler(prtcl, 1);\n            repeatEuler(prtcl, 2);\n\n            prtcl.alpha = 1.0;\n\n            prtcl.zkey =\n                camera.matrix[2] * prtcl.position[0] +\n                camera.matrix[6] * prtcl.position[1] +\n                camera.matrix[10] * prtcl.position[2] +\n                camera.matrix[14];\n        }\n\n        pointFlower.particles.sort(function (p0, p1) {\n            return p0.zkey - p1.zkey;\n        });\n\n        let ipos = pointFlower.positionArrayOffset;\n        let ieuler = pointFlower.eulerArrayOffset;\n        let imisc = pointFlower.miscArrayOffset;\n        for (let i = 0; i < pointFlower.numFlowers; i++) {\n            let prtcl = pointFlower.particles[i];\n            pointFlower.dataArray[ipos] = prtcl.position[0];\n            pointFlower.dataArray[ipos + 1] = prtcl.position[1];\n            pointFlower.dataArray[ipos + 2] = prtcl.position[2];\n            ipos += 3;\n            pointFlower.dataArray[ieuler] = prtcl.euler[0];\n            pointFlower.dataArray[ieuler + 1] = prtcl.euler[1];\n            pointFlower.dataArray[ieuler + 2] = prtcl.euler[2];\n            ieuler += 3;\n            pointFlower.dataArray[imisc] = prtcl.size;\n            pointFlower.dataArray[imisc + 1] = prtcl.alpha;\n            imisc += 2;\n        }\n\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n        let prog = pointFlower.program;\n        useShader(prog);\n\n        gl.uniformMatrix4fv(prog.uniforms.uProjection, false, projection.matrix);\n        gl.uniformMatrix4fv(prog.uniforms.uModelview, false, camera.matrix);\n        gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n        gl.uniform3fv(prog.uniforms.uDOF, Vector3.arrayForm(camera.dof));\n        gl.uniform3fv(prog.uniforms.uFade, Vector3.arrayForm(pointFlower.fader));\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, pointFlower.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, pointFlower.dataArray, gl.DYNAMIC_DRAW);\n\n        gl.vertexAttribPointer(\n            prog.attributes.aPosition,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            pointFlower.positionArrayOffset * Float32Array.BYTES_PER_ELEMENT\n        );\n        gl.vertexAttribPointer(\n            prog.attributes.aEuler,\n            3,\n            gl.FLOAT,\n            false,\n            0,\n            pointFlower.eulerArrayOffset * Float32Array.BYTES_PER_ELEMENT\n        );\n        gl.vertexAttribPointer(\n            prog.attributes.aMisc,\n            2,\n            gl.FLOAT,\n            false,\n            0,\n            pointFlower.miscArrayOffset * Float32Array.BYTES_PER_ELEMENT\n        );\n\n        for (let i = 1; i < 2; i++) {\n            let zpos = i * -2.0;\n            pointFlower.offset[0] = pointFlower.area.x * -1.0;\n            pointFlower.offset[1] = pointFlower.area.y * -1.0;\n            pointFlower.offset[2] = pointFlower.area.z * zpos;\n            gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n            gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n            pointFlower.offset[0] = pointFlower.area.x * -1.0;\n            pointFlower.offset[1] = pointFlower.area.y * 1.0;\n            pointFlower.offset[2] = pointFlower.area.z * zpos;\n            gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n            gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n            pointFlower.offset[0] = pointFlower.area.x * 1.0;\n            pointFlower.offset[1] = pointFlower.area.y * -1.0;\n            pointFlower.offset[2] = pointFlower.area.z * zpos;\n            gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n            gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n            pointFlower.offset[0] = pointFlower.area.x * 1.0;\n            pointFlower.offset[1] = pointFlower.area.y * 1.0;\n            pointFlower.offset[2] = pointFlower.area.z * zpos;\n            gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n            gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n        }\n\n        pointFlower.offset[0] = 0.0;\n        pointFlower.offset[1] = 0.0;\n        pointFlower.offset[2] = 0.0;\n        gl.uniform3fv(prog.uniforms.uOffset, pointFlower.offset);\n        gl.drawArrays(gl.POINT, 0, pointFlower.numFlowers);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        unuseShader(prog);\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.disable(gl.BLEND);\n    }\n\n    function createEffectProgram(vtxsrc, frgsrc, exunifs, exattrs) {\n        let ret = {};\n        let unifs = ['uResolution', 'uSrc', 'uDelta'];\n        if (exunifs) {\n            unifs = unifs.concat(exunifs);\n        }\n        let attrs = ['aPosition'];\n        if (exattrs) {\n            attrs = attrs.concat(exattrs);\n        }\n\n        ret.program = createShader(vtxsrc, frgsrc, unifs, attrs);\n        useShader(ret.program);\n\n        ret.dataArray = new Float32Array([\n            -1.0,\n            -1.0,\n            1.0,\n            -1.0,\n            -1.0,\n            1.0,\n            1.0,\n            1.0,\n        ]);\n        ret.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, ret.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, ret.dataArray, gl.STATIC_DRAW);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        unuseShader(ret.program);\n\n        return ret;\n    }\n\n    function useEffect(fxobj, srctex) {\n        let prog = fxobj.program;\n        useShader(prog);\n        gl.uniform3fv(prog.uniforms.uResolution, renderSpec.array);\n\n        if (srctex != null) {\n            gl.uniform2fv(prog.uniforms.uDelta, srctex.dtxArray);\n            gl.uniform1i(prog.uniforms.uSrc, 0);\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, srctex.texture);\n        }\n    }\n\n    function drawEffect(fxobj) {\n        gl.bindBuffer(gl.ARRAY_BUFFER, fxobj.buffer);\n        gl.vertexAttribPointer(\n            fxobj.program.attributes.aPosition,\n            2,\n            gl.FLOAT,\n            false,\n            0,\n            0\n        );\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n\n    function unuseEffect(fxobj) {\n        unuseShader(fxobj.program);\n    }\n\n    let effectLib = {};\n    function createEffectLib() {\n        let vtxsrc, frgsrc;\n        let cmnvtxsrc = fx_common_vsh;\n\n        frgsrc = bg_fsh;\n        effectLib.sceneBg = createEffectProgram(cmnvtxsrc, frgsrc, ['uTimes'], null);\n\n        frgsrc = fx_brightbuf_fsh;\n        effectLib.mkBrightBuf = createEffectProgram(cmnvtxsrc, frgsrc, null, null);\n\n        frgsrc = fx_dirblur_r4_fsh;\n        effectLib.dirBlur = createEffectProgram(\n            cmnvtxsrc,\n            frgsrc,\n            ['uBlurDir'],\n            null\n        );\n\n        vtxsrc = pp_final_vsh;\n        frgsrc = pp_final_fsh;\n        effectLib.finalComp = createEffectProgram(vtxsrc, frgsrc, ['uBloom'], null);\n    }\n\n    function createBackground() {}\n\n    function initBackground() {}\n\n    function renderBackground() {\n        gl.disable(gl.DEPTH_TEST);\n\n        useEffect(effectLib.sceneBg, null);\n        gl.uniform2f(\n            effectLib.sceneBg.program.uniforms.uTimes,\n            timeInfo.elapsed,\n            timeInfo.delta\n        );\n        drawEffect(effectLib.sceneBg);\n        unuseEffect(effectLib.sceneBg);\n\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    function createPostProcess() {}\n\n    function initPostProcess() {}\n\n    function renderPostProcess() {\n        gl.enable(gl.TEXTURE_2D);\n        gl.disable(gl.DEPTH_TEST);\n        let bindRT = function (rt, isclear) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, rt.frameBuffer);\n            gl.viewport(0, 0, rt.width, rt.height);\n            if (isclear) {\n                gl.clearColor(0, 0, 0, 0);\n                gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n            }\n        };\n\n        bindRT(renderSpec.wHalfRT0, true);\n        useEffect(effectLib.mkBrightBuf, renderSpec.mainRT);\n        drawEffect(effectLib.mkBrightBuf);\n        unuseEffect(effectLib.mkBrightBuf);\n\n        for (let i = 0; i < 2; i++) {\n            let p = 1.5 + 1 * i;\n            let s = 2.0 + 1 * i;\n            bindRT(renderSpec.wHalfRT1, true);\n            useEffect(effectLib.dirBlur, renderSpec.wHalfRT0);\n            gl.uniform4f(\n                effectLib.dirBlur.program.uniforms.uBlurDir,\n                p,\n                0.0,\n                s,\n                0.0\n            );\n            drawEffect(effectLib.dirBlur);\n            unuseEffect(effectLib.dirBlur);\n\n            bindRT(renderSpec.wHalfRT0, true);\n            useEffect(effectLib.dirBlur, renderSpec.wHalfRT1);\n            gl.uniform4f(\n                effectLib.dirBlur.program.uniforms.uBlurDir,\n                0.0,\n                p,\n                0.0,\n                s\n            );\n            drawEffect(effectLib.dirBlur);\n            unuseEffect(effectLib.dirBlur);\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        useEffect(effectLib.finalComp, renderSpec.mainRT);\n        gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom, 1);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, renderSpec.wHalfRT0.texture);\n        drawEffect(effectLib.finalComp);\n        unuseEffect(effectLib.finalComp);\n        gl.enable(gl.DEPTH_TEST);\n    }\n\n    function createScene() {\n        createEffectLib();\n        createBackground();\n        createPointFlowers();\n        createPostProcess();\n        sceneStandBy = true;\n    }\n\n    function initScene() {\n        initBackground();\n        initPointFlowers();\n        initPostProcess();\n        camera.position.z = pointFlower.area.z + projection.nearfar[0];\n        projection.angle =\n            ((Math.atan2(\n                pointFlower.area.y,\n                camera.position.z + pointFlower.area.z\n            ) *\n                180.0) /\n                Math.PI) *\n            2.0;\n        Matrix44.loadProjection(\n            projection.matrix,\n            renderSpec.aspect,\n            projection.angle,\n            projection.nearfar[0],\n            projection.nearfar[1]\n        );\n    }\n\n    function renderScene() {\n        Matrix44.loadLookAt(\n            camera.matrix,\n            camera.position,\n            camera.lookat,\n            camera.up\n        );\n        gl.enable(gl.DEPTH_TEST);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, renderSpec.mainRT.frameBuffer);\n        gl.viewport(0, 0, renderSpec.mainRT.width, renderSpec.mainRT.height);\n        gl.clearColor(0.005, 0, 0.05, 0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        renderBackground();\n        renderPointFlowers();\n        renderPostProcess();\n    }\n\n    function onResize(e) {\n        makeCanvasFullScreen(document.getElementById('sakura'));\n        setViewports();\n        if (sceneStandBy) {\n            initScene();\n        }\n    }\n\n    function setViewports() {\n        renderSpec.setSize(gl.canvas.width, gl.canvas.height);\n\n        gl.clearColor(0.2, 0.2, 0.5, 1.0);\n        gl.viewport(0, 0, renderSpec.width, renderSpec.height);\n\n        let rtfunc = function (rtname, rtw, rth) {\n            let rt = renderSpec[rtname];\n            if (rt) deleteRenderTarget(rt);\n            renderSpec[rtname] = createRenderTarget(rtw, rth);\n        };\n        rtfunc('mainRT', renderSpec.width, renderSpec.height);\n        rtfunc('wFullRT0', renderSpec.width, renderSpec.height);\n        rtfunc('wFullRT1', renderSpec.width, renderSpec.height);\n        rtfunc('wHalfRT0', renderSpec.halfWidth, renderSpec.halfHeight);\n        rtfunc('wHalfRT1', renderSpec.halfWidth, renderSpec.halfHeight);\n    }\n\n    function render() {\n        renderScene();\n    }\n\n    let animating = true;\n\n    function animate() {\n        let curdate = new Date();\n        timeInfo.elapsed = (curdate - timeInfo.start) / 1000.0;\n        timeInfo.delta = (curdate - timeInfo.prev) / 1000.0;\n        timeInfo.prev = curdate;\n\n        if (animating) requestAnimationFrame(animate);\n        render();\n    }\n\n    function makeCanvasFullScreen(canvas) {\n        let b = document.body;\n        let d = document.documentElement;\n        let fullw = Math.max(\n            b.clientWidth,\n            b.scrollWidth,\n            d.scrollWidth,\n            d.clientWidth\n        );\n        let fullh = Math.max(\n            b.clientHeight,\n            b.scrollHeight,\n            d.scrollHeight,\n            d.clientHeight\n        );\n        canvas.width = fullw;\n        canvas.height = fullh;\n    }\n\n    let canvas = document.getElementById('sakura');\n    try {\n        makeCanvasFullScreen(canvas);\n        gl = canvas.getContext('experimental-webgl');\n    } catch (e) {\n        alert('WebGL not supported.' + e);\n        console.error(e);\n        return;\n    }\n\n    window.addEventListener('resize', onResize);\n\n    setViewports();\n    createScene();\n    initScene();\n\n    timeInfo.start = new Date();\n    timeInfo.prev = timeInfo.start;\n    animate();\n\n    (function (w, r) {\n        w['r' + r] =\n            w['r' + r] ||\n            w['webkitR' + r] ||\n            w['mozR' + r] ||\n            w['msR' + r] ||\n            w['oR' + r] ||\n            function (c) {\n                w.setTimeout(c, 1000 / 60);\n            };\n    })(window, 'equestAnimationFrame');\n};\n","import './index.less';\n\nimport { Button } from 'antd';\nimport { IUser } from 'global';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { RootState } from '../../redux';\nimport { savePublisher } from '../../redux/user/actions';\nimport { pageNames, RouteParams } from '../../router/constants';\nimport animate from './animation';\n\ninterface OwnProps {}\n\ninterface DispatchProps {\n    savePublisher: typeof savePublisher;\n}\n\nconst mapDispatchToProps = {\n    savePublisher,\n};\n\ninterface StateProps {\n    publisher: IUser;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    publisher: state.user.publisher as IUser,\n});\n\ntype IndexProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\nclass Index extends Component<IndexProps> {\n    componentDidMount(): void {\n        animate();\n    }\n\n    render(): JSX.Element {\n        let currentUrl = this.props.match.url;\n        // removing trailing slash if there is one\n        if (currentUrl.charAt(currentUrl.length - 1) === '/') {\n            currentUrl = currentUrl.substring(0, currentUrl.length - 1);\n        }\n        // if url is http://localhost:2000/publisher/5efa881981efba83dd711f09/home, for example,\n        // change it to http://localhost:2000/publisher/5efa881981efba83dd711f09\n        // so that we can append a different page name\n        const index = currentUrl.length - pageNames.HOME.length;\n        if (currentUrl.substring(index, currentUrl.length) === pageNames.HOME) {\n            currentUrl = currentUrl.substring(0, index - 1);\n        }\n        return (\n            <div className=\"home\">\n                {' '}\n                <canvas id=\"sakura\" />\n                <div className=\"content\">\n                    <div className=\"home-header\">\n                        <Link\n                            className=\"link\"\n                            to={`${currentUrl}/${pageNames.HOME}`}\n                        >\n                            <img\n                                className=\"avatar\"\n                                src={this.props.publisher.avatar}\n                            />\n                        </Link>\n                    </div>\n                    <div className=\"home-body\">\n                        <div className=\"list\">\n                            <Link\n                                className=\"link\"\n                                to={`${currentUrl}/${pageNames.ARTICLE_LIST}`}\n                                onClick={() => this.forceUpdate()}\n                            >\n                                <Button icon=\"read\" type=\"primary\">\n                                    Articles\n                                </Button>\n                            </Link>\n                            <a\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"link\"\n                                href={`https://github.com/chuntonggao`}\n                            >\n                                <Button icon=\"github\" type=\"primary\">\n                                    GitHub\n                                </Button>\n                            </a>\n                        </div>\n                        <div className=\"introduce\"> {this.props.publisher.bio} </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Index);\n","import { PageName, pageNames } from '../../router/constants';\n\nconst navItems: {\n    displayName: string;\n    icon: string;\n\n    to: PageName;\n}[] = [\n    {\n        displayName: 'Home',\n        icon: 'home',\n\n        to: pageNames.HOME,\n    },\n    {\n        displayName: 'Articles',\n        icon: 'ordered-list',\n        to: pageNames.ARTICLE_LIST,\n    },\n    {\n        displayName: 'About',\n        icon: 'user',\n        to: pageNames.ABOUT,\n    },\n];\n\nexport default navItems;\n","import './index.less';\n\nimport { IUser } from 'global';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\ninterface NavLogoProps {\n    publisher: IUser;\n}\n\nconst NavLogo: React.FC<NavLogoProps> = props => {\n    return (\n        <Link to={`/publisher/${props.publisher._id}`}>\n            <div className=\"logo\">\n                <img src={props.publisher.avatar} alt=\"nav-avatar\" />\n            </div>\n        </Link>\n    );\n};\n\nexport default NavLogo;\n","import './index.less';\n\nimport { Avatar, Button, Col, Icon, Layout, Menu, Row } from 'antd';\nimport { IUser } from 'global';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { store } from '../../redux/index';\nimport { logoutReader } from '../../redux/user/actions';\nimport { PageName, paths } from '../../router/constants';\nimport navItems from './navItems';\nimport NavLogo from './NavLogo';\n\nconst { Header } = Layout;\nconst SubMenu = Menu.SubMenu;\nconst MenuItemGroup = Menu.ItemGroup;\n\ninterface DesktopHeaderProps {\n    publisher: IUser;\n    reader: IUser | undefined;\n    setShowLogin: (showLogin: boolean) => void;\n    setShowRegister: (showRegister: boolean) => void;\n    activePage: PageName;\n    updateActivePage: (activePage: PageName) => void;\n}\n\nconst DeskTopHeader: React.FC<DesktopHeaderProps> = props => {\n    const navItemsJSX: JSX.Element[] = navItems.map(navItem => {\n        return (\n            <Menu.Item key={navItem.to}>\n                <Link\n                    to={`/${paths.PUBLISHER}/${props.publisher._id}/${navItem.to}`}\n                    onClick={(): void => props.updateActivePage(navItem.to)}\n                >\n                    <Icon type={navItem.icon} theme=\"outlined\" />\n                    {navItem.displayName}\n                </Link>\n            </Menu.Item>\n        );\n    });\n\n    return (\n        <Header\n            className=\"header\"\n            style={{\n                position: 'fixed',\n                zIndex: 1,\n                top: 0,\n                width: '100%',\n                minWidth: '1200px',\n                height: '66px',\n                float: 'left',\n                backgroundColor: 'white',\n                borderBottom: '1px solid #eee',\n            }}\n        >\n            <Row className=\"container\">\n                <Col style={{ width: '120px', float: 'left' }}>\n                    <NavLogo publisher={props.publisher} />\n                </Col>\n                <Col style={{ width: '780px', float: 'left' }}>\n                    <Menu\n                        theme=\"light\"\n                        mode=\"horizontal\"\n                        defaultSelectedKeys={['1']}\n                        // onClick={this.handleMenu}\n                        selectedKeys={[props.activePage]}\n                        style={{ lineHeight: '64px', borderBottom: 'none' }}\n                    >\n                        {navItemsJSX}\n                    </Menu>\n                </Col>\n                <Col style={{ textAlign: 'right', width: '300px', float: 'left' }}>\n                    {props.reader ? (\n                        <Menu\n                            style={{\n                                width: 220,\n                                lineHeight: '64px',\n                                display: 'inline-block',\n                            }}\n                            mode=\"horizontal\"\n                        >\n                            <SubMenu\n                                title={\n                                    <span className=\"submenu-title-wrapper\">\n                                        <Avatar\n                                            size=\"large\"\n                                            icon=\"user\"\n                                            src={props.reader.avatar}\n                                            style={{ marginRight: 5 }}\n                                        />\n                                        {props.reader.name}\n                                    </span>\n                                }\n                            >\n                                <MenuItemGroup>\n                                    <Menu.Item\n                                        onClick={() =>\n                                            store.dispatch(logoutReader())\n                                        }\n                                        key=\"logout\"\n                                    >\n                                        Log out\n                                    </Menu.Item>\n                                </MenuItemGroup>\n                            </SubMenu>\n                        </Menu>\n                    ) : (\n                        <div>\n                            <Button\n                                type=\"primary\"\n                                icon=\"login\"\n                                style={{ marginRight: '15px' }}\n                                onClick={(): void => props.setShowLogin(true)}\n                            >\n                                Log in\n                            </Button>\n                            <Button\n                                type=\"primary\"\n                                icon=\"user\"\n                                style={{ marginRight: '15px' }}\n                                onClick={(): void => props.setShowRegister(true)}\n                            >\n                                Register\n                            </Button>\n                        </div>\n                    )}\n                </Col>\n            </Row>\n        </Header>\n    );\n};\n\nexport default DeskTopHeader;\n","import { Button, Icon, Input, message, Modal } from 'antd';\nimport { IUser } from 'global';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { RootState } from '../../redux';\nimport { saveReader } from '../../redux/user/actions';\nimport { login, LoginRequestBody, LoginResponseBody } from '../../service/user';\n\ninterface OwnProps {\n    setShowLogin: (showLogin: boolean) => void;\n}\n\ninterface DispatchProps {\n    saveReader: typeof saveReader;\n}\n\nconst mapDispatchToProps = {\n    saveReader,\n};\n\ninterface StateProps {\n    reader: IUser;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    reader: state.user.reader as IUser,\n});\n\ntype LoginProps = OwnProps & DispatchProps & StateProps;\n\ntype LoginState = LoginRequestBody & {\n    loading: boolean;\n};\n\nclass Login extends Component<LoginProps, LoginState> {\n    state = {\n        email: '',\n        password: '',\n        loading: false,\n    };\n\n    login = async (): Promise<void> => {\n        this.setState({ loading: true });\n        const response = await login(this.state);\n        this.setState({ loading: false });\n        if (response.data) {\n            const responseBody: LoginResponseBody = response.data;\n            const readerInfo = responseBody.user;\n            this.props.saveReader(readerInfo);\n            this.props.setShowLogin(false);\n            message.success('Login successful.');\n        }\n    };\n\n    handleSubmit = (): void => {\n        const emailReg = new RegExp(\n            '^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$'\n        );\n        if (!this.state.email) {\n            message.error('Please enter your email.');\n        } else if (!emailReg.test(this.state.email)) {\n            message.error('Invalid email.');\n        } else if (!this.state.password) {\n            message.error('Please enter your password.');\n        } else {\n            this.login();\n        }\n    };\n\n    handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        const key = e.target.name as 'email' | 'password';\n        const newState = { ...this.state };\n        newState[key] = e.target.value;\n        this.setState(newState);\n    };\n\n    render(): JSX.Element {\n        return (\n            <Modal\n                title=\"Login\"\n                style={{ top: '25%' }}\n                visible={true}\n                onCancel={(): void => this.props.setShowLogin(false)}\n                width={400}\n                footer={null}\n            >\n                <div className=\"login-input\">\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        name=\"email\"\n                        placeholder=\"Email\"\n                        value={this.state.email}\n                        onChange={this.handleChange}\n                    />\n                    <Input\n                        style={{ marginBottom: 40 }}\n                        prefix={\n                            <Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        type=\"password\"\n                        name=\"password\"\n                        placeholder=\"Password\"\n                        value={this.state.password}\n                        onChange={this.handleChange}\n                    />\n                </div>\n                <div className=\"login-submit\">\n                    <Button\n                        style={{ width: '100%', marginBottom: '20px' }}\n                        type=\"primary\"\n                        onClick={this.handleSubmit}\n                        loading={this.state.loading}\n                    >\n                        Login\n                    </Button>\n                </div>\n            </Modal>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Login);\n","import './index.less';\n\nimport { Drawer, Icon } from 'antd';\nimport { IUser } from 'global';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { store } from '../../redux';\nimport { logoutReader } from '../../redux/user/actions';\nimport { PageName, paths } from '../../router/constants';\nimport navItems from './navItems';\n\ninterface MobileDrawerProps {\n    publisher: IUser;\n    reader: IUser | undefined;\n    setShowDrawer: (showDrawer: boolean) => void;\n    setShowLogin: (showLogin: boolean) => void;\n    setShowRegister: (showRegister: boolean) => void;\n    updateActivePage: (activePage: PageName) => void;\n}\n\nconst MobileDrawer: React.FC<MobileDrawerProps> = props => {\n    const navItemsJSX: JSX.Element[] = navItems.map(navItem => {\n        return (\n            <p\n                key={navItem.to}\n                onClick={(): void => props.updateActivePage(navItem.to)}\n            >\n                <Link\n                    to={`/${paths.PUBLISHER}/${props.publisher._id}/${navItem.to}`}\n                >\n                    <Icon type={navItem.icon}></Icon>\n                    {` ${navItem.displayName}`}\n                </Link>\n            </p>\n        );\n    });\n\n    let userOperation: JSX.Element;\n    if (props.reader) {\n        userOperation = (\n            <div\n                onClick={(): void => {\n                    store.dispatch(logoutReader());\n                    props.setShowDrawer(false);\n                }}\n            >\n                <p>{props.reader.name}</p>\n                <p>\n                    <Icon type=\"logout\" /> Logout\n                </p>\n            </div>\n        );\n    } else {\n        userOperation = (\n            <div>\n                <p\n                    onClick={(): void => {\n                        props.setShowLogin(true);\n                        props.setShowDrawer(false);\n                    }}\n                >\n                    <Icon type=\"login\" /> Login\n                </p>\n                <p\n                    onClick={(): void => {\n                        props.setShowRegister(true);\n                        props.setShowDrawer(false);\n                    }}\n                >\n                    <Icon type=\"user\" /> Register\n                </p>\n            </div>\n        );\n    }\n\n    return (\n        <Drawer\n            placement=\"top\"\n            closable={false}\n            onClose={(): void => props.setShowDrawer(false)}\n            visible={true}\n            height={420}\n        >\n            <div className=\"drawer\">\n                {navItemsJSX} {userOperation}\n            </div>\n        </Drawer>\n    );\n};\n\nexport default MobileDrawer;\n","import './index.less';\nimport './index.less';\n\nimport { Col, Icon, Layout, Row } from 'antd';\nimport { IUser } from 'global';\nimport React from 'react';\n\nimport { PageName, pageNames } from '../../router/constants';\nimport NavLogo from './NavLogo';\nconst { Header } = Layout;\n\ninterface HeaderProps {\n    activePage: PageName;\n    publisher: IUser;\n    setShowDrawer: (showDrawer: boolean) => void;\n}\n\nconst MobileHeader: React.FC<HeaderProps> = props => {\n    let navTitle = '';\n    if (props.activePage === pageNames.ARTICLE_LIST) {\n        navTitle = 'Articles';\n    } else if (props.activePage === pageNames.ABOUT) {\n        navTitle = 'About';\n    }\n    return (\n        <Header\n            className=\"header\"\n            style={{\n                position: 'fixed',\n                zIndex: 1,\n                top: 0,\n                width: '100%',\n                height: '64px',\n                float: 'left',\n                backgroundColor: 'white',\n                borderBottom: '1px solid #eee',\n            }}\n        >\n            <Row className=\"container\">\n                <Col style={{ width: '25%', float: 'left', lineHeight: '64px' }}>\n                    <NavLogo publisher={props.publisher} />\n                </Col>\n                <Col style={{ textAlign: 'center', width: '50%', float: 'left' }}>\n                    <div className=\"nav-title\"> {navTitle} </div>\n                </Col>\n                <Col style={{ textAlign: 'right', width: '25%', float: 'left' }}>\n                    <div>\n                        <Icon\n                            type=\"bars\"\n                            onClick={(): void => props.setShowDrawer(true)}\n                            style={{\n                                fontSize: '40px',\n                                marginRight: '10px',\n                                marginTop: '10px',\n                            }}\n                        />\n                    </div>\n                </Col>\n            </Row>\n        </Header>\n    );\n};\n\nexport default MobileHeader;\n","import { Button, Icon, Input, message, Modal } from 'antd';\nimport { IUser } from 'global';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { RootState } from '../../redux';\nimport { saveReader } from '../../redux/user/actions';\nimport {\n    register,\n    RegisterRequestBody,\n    RegisterResponseBody,\n} from '../../service/user';\n\ninterface OwnProps {\n    setShowRegister: (showRegister: boolean) => void;\n}\n\ninterface DispatchProps {\n    saveReader: typeof saveReader;\n}\n\nconst mapDispatchToProps = {\n    saveReader,\n};\n\ninterface StateProps {\n    reader: IUser;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    reader: state.user.reader as IUser,\n});\n\ntype RegisterProps = OwnProps & DispatchProps & StateProps;\n\ntype RegisterState = RegisterRequestBody & {\n    loading: boolean;\n};\n\nclass Register extends Component<RegisterProps, RegisterState> {\n    state = {\n        email: '',\n        password: '',\n        confirmPassword: '',\n        name: '',\n        phone: '',\n        loading: false,\n    };\n\n    register = async (): Promise<void> => {\n        this.setState({ loading: true });\n        const response = await register(this.state);\n        this.setState({ loading: false });\n        if (response.data) {\n            const responseBody: RegisterResponseBody = response.data;\n            const readerInfo = responseBody.user;\n            this.props.saveReader(readerInfo);\n            this.props.setShowRegister(false);\n            message.success('Registration successful.');\n        }\n    };\n\n    handleSubmit = (): void => {\n        const emailReg = new RegExp(\n            '^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$'\n        );\n        const phoneReg = /^\\d+$/;\n        if (!this.state.email) {\n            message.error('Please enter your email.');\n        } else if (!emailReg.test(this.state.email)) {\n            message.error('Invalid email.');\n        } else if (!this.state.name) {\n            message.error('Please enter your name.');\n        } else if (!this.state.password) {\n            message.error('Please enter your password.');\n        } else if (!this.state.confirmPassword) {\n            message.error('Please confirm your password.');\n        } else if (this.state.password !== this.state.confirmPassword) {\n            message.error(`Your passwords don't match.`);\n        } else if (this.state.phone && !phoneReg.test(this.state.phone)) {\n            message.error('Invalid phone number.');\n        } else {\n            this.register();\n        }\n    };\n\n    handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        const key = e.target.name as\n            | 'email'\n            | 'password'\n            | 'confirmPassword'\n            | 'name'\n            | 'phone';\n        const newState = { ...this.state };\n        newState[key] = e.target.value;\n        this.setState(newState);\n    };\n\n    render(): JSX.Element {\n        return (\n            <Modal\n                title=\"Register\"\n                style={{ top: '18%' }}\n                visible={true}\n                onCancel={(): void => this.props.setShowRegister(false)}\n                width={500}\n                footer={null}\n            >\n                <div className=\"register-input\">\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        name=\"email\"\n                        placeholder=\"Email\"\n                        value={this.state.email}\n                        onChange={this.handleChange}\n                    />\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        type=\"password\"\n                        name=\"password\"\n                        placeholder=\"Password\"\n                        value={this.state.password}\n                        onChange={this.handleChange}\n                    />\n\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        type=\"password\"\n                        name=\"confirmPassword\"\n                        placeholder=\"Confirm password\"\n                        value={this.state.confirmPassword}\n                        onChange={this.handleChange}\n                    />\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />\n                        }\n                        name=\"name\"\n                        placeholder=\"Name\"\n                        value={this.state.name}\n                        onChange={this.handleChange}\n                    />\n\n                    <Input\n                        style={{ marginBottom: 20 }}\n                        prefix={\n                            <Icon\n                                type=\"phone\"\n                                style={{ color: 'rgba(0,0,0,.25)' }}\n                            />\n                        }\n                        name=\"phone\"\n                        placeholder=\"Phone\"\n                        value={this.state.phone}\n                        onChange={this.handleChange}\n                    />\n                </div>\n                <div className=\"register-submit\">\n                    <Button\n                        style={{ width: '100%', marginBottom: '20px' }}\n                        type=\"primary\"\n                        onClick={this.handleSubmit}\n                        loading={this.state.loading}\n                    >\n                        Register\n                    </Button>\n                </div>\n            </Modal>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(Register);\n","import './index.less';\n\nimport { IUser } from 'global';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport { RootState } from '../../redux';\nimport { PageName, RouteParams } from '../../router/constants';\nimport DesktopHeader from './DesktopHeader';\nimport LoginModal from './LoginModal';\nimport MobileDrawer from './MobileDrawer';\nimport MobileHeader from './MobileHeader';\nimport RegisterModal from './RegisterModal';\n\ninterface OwnProps {}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    reader: IUser | undefined;\n    publisher: IUser;\n    isMobile: boolean;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    publisher: state.user.publisher as IUser,\n    reader: state.user.reader,\n    isMobile: state.isMobile.isMobile,\n});\n\ntype NavProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\ninterface NavState {\n    showLogin: boolean;\n    showRegister: boolean;\n    activePage: PageName;\n    showDrawer: boolean;\n}\n\nclass Nav extends Component<NavProps, NavState> {\n    state = {\n        showLogin: false,\n        showRegister: false,\n        activePage: this.props.match.params.page,\n        showDrawer: false,\n    };\n\n    setShowDrawer = (showDrawer: boolean): void => this.setState({ showDrawer });\n\n    setShowLogin = (showLogin: boolean): void => this.setState({ showLogin });\n\n    setShowRegister = (showRegister: boolean): void =>\n        this.setState({ showRegister });\n\n    updateActivePage = (activePage: PageName): void => {\n        this.setState({ ...this.state, activePage, showDrawer: false });\n    };\n\n    render(): JSX.Element {\n        let header: JSX.Element;\n        if (this.props.isMobile === true) {\n            header = (\n                <MobileHeader\n                    activePage={this.state.activePage}\n                    publisher={this.props.publisher}\n                    setShowDrawer={this.setShowDrawer}\n                />\n            );\n        } else {\n            header = (\n                <DesktopHeader\n                    publisher={this.props.publisher}\n                    reader={this.props.reader}\n                    setShowLogin={this.setShowLogin}\n                    setShowRegister={this.setShowRegister}\n                    activePage={this.state.activePage}\n                    updateActivePage={this.updateActivePage}\n                />\n            );\n        }\n\n        return (\n            <div className=\"left\">\n                {header}\n                {this.state.showDrawer && (\n                    <MobileDrawer\n                        publisher={this.props.publisher}\n                        reader={this.props.reader}\n                        setShowDrawer={this.setShowDrawer}\n                        setShowLogin={this.setShowLogin}\n                        setShowRegister={this.setShowRegister}\n                        updateActivePage={this.updateActivePage}\n                    />\n                )}\n                {this.state.showLogin && (\n                    <LoginModal setShowLogin={this.setShowLogin} />\n                )}\n                {this.state.showRegister && (\n                    <RegisterModal setShowRegister={this.setShowRegister} />\n                )}\n            </div>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(Nav);\n","import './index.less';\n\nimport { Avatar } from 'antd';\nimport { ICategory, IUser } from 'global';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Link, RouteComponentProps } from 'react-router-dom';\n\nimport { RootState } from '../../redux';\nimport { pageNames, paramNames, paths, RouteParams } from '../../router/constants';\n\ninterface OwnProps {}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    categoryList: ICategory[];\n    publisher: IUser;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    categoryList: state.categoryList.categories as ICategory[],\n    publisher: state.user.publisher as IUser,\n});\n\ntype ProfileCardProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\nconst ProfileCard: React.FC<ProfileCardProps> = props => {\n    const publisherId = props.match.params.publisherId;\n    const categoryTags: JSX.Element[] = props.categoryList.map(category => {\n        return (\n            <Link\n                className=\"item\"\n                key={category._id}\n                to={`/${paths.PUBLISHER}/${publisherId}/${pageNames.ARTICLE_LIST}?${paramNames.CATEGORY_ID}=${category._id}`}\n                onClick={(): void => {\n                    window.location.href += `?${paramNames.CATEGORY_ID}=${category._id}`;\n                    window.location.reload();\n                }}\n            >\n                <span>{category.name}</span>\n            </Link>\n        );\n    });\n    return (\n        <div className=\"right\">\n            <Avatar\n                className=\"right-logo\"\n                src={props.publisher.avatar}\n                size={130}\n                icon=\"user\"\n            />\n            <div className=\"title\">{props.publisher.name}</div>\n            <div className=\"right-content\" />\n            <div className=\"tags\">\n                <div className=\"title\">Categories</div>\n                {categoryTags}\n            </div>\n        </div>\n    );\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(ProfileCard);\n","/*\nThis higher order component specifies the layout for all blog pages,\nexcept for the home page.\nFor the home page, please use the Home component.\n*/\nimport './index.less';\nimport './mobile.less';\n\nimport { BackTop, Layout } from 'antd';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\n\nimport Nav from '../components/Nav/';\nimport ProfileCard from '../components/ProfileCard/';\nimport { RootState } from '../redux';\nimport { pageNames, RouteParams } from '../router/constants';\nimport constants from '../util/constants';\nconst { Content, Footer, Sider } = Layout;\n\ninterface OwnProps {}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    isMobile: boolean;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    isMobile: state.isMobile.isMobile,\n});\n\ntype BaseLayoutProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\nconst BaseLayout: React.FC<BaseLayoutProps> = props => {\n    let showProfileCard = false;\n    const pageName = props.match.params.page;\n    if (\n        pageName !== pageNames.ARTICLE_DETAIL &&\n        pageName !== pageNames.ABOUT &&\n        !props.isMobile\n    ) {\n        showProfileCard = true;\n    }\n    const { history, location, match } = props;\n    const routeProps = { history, location, match };\n    return (\n        <div className=\"Layouts\">\n            <div>\n                <Nav {...routeProps} />\n                <Layout className=\"layout\">\n                    <Content>\n                        <Layout style={{ padding: '24px 0', background: '#fff' }}>\n                            <Content\n                                style={{ padding: '0 24px 0 0', minHeight: 280 }}\n                            >\n                                {props.children}\n                            </Content>\n                            {showProfileCard && (\n                                <Sider width={350} style={{ background: '#fff' }}>\n                                    <ProfileCard {...routeProps} />\n                                </Sider>\n                            )}\n                        </Layout>\n                    </Content>\n                </Layout>\n                <Footer style={{ textAlign: 'center', background: '#fff' }}>\n                    <a href={constants.BLOGGY_PUBLISHER_BASE_URL}>\n                        Bloggy Publisher\n                    </a>{' '}\n                    <br />\n                    Bloggy ©2020 Created by Chuntong, Bolin, Max and Kerry\n                </Footer>\n                <BackTop />\n            </div>\n        </div>\n    );\n};\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(BaseLayout);\n","import { ICategory, IUser } from 'global';\nimport { RequestResponse } from 'umi-request';\n\nimport service from './index';\n\nconst baseUrl = process.env.REACT_APP_API_URL;\n\nexport interface GetCategoryListRequestBody {\n    user: IUser['_id'];\n}\n\nexport interface GetCategoryListResponseBody {\n    count: number;\n    categoryList: ICategory[];\n}\n\nexport const getCategoryList = (\n    requestBody: GetCategoryListRequestBody\n): Promise<RequestResponse<GetCategoryListResponseBody>> => {\n    return service(`${baseUrl}/getCategoryList`, {\n        method: 'POST',\n        data: requestBody,\n    });\n};\n","/*\nThis higher order component will fetch the publisher's\nuser information, category list and first 10 articles.\nIf you need any of the above information in a component,\nyou should wrap PublisherLayout as an HOC outside of that component.\n*/\n\nimport { ICategory, IUser, VerboseArticle } from 'global';\nimport React, { Component } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\n\nimport { RootState } from '../redux';\nimport { saveArticleList } from '../redux/articleList/actions';\nimport { saveCategoryList } from '../redux/categoryList/actions';\nimport { savePublisher } from '../redux/user/actions';\nimport { pageNames, RouteParams } from '../router/constants';\nimport { getArticleList, GetArticleListResponseBody } from '../service/article';\nimport { getCategoryList, GetCategoryListResponseBody } from '../service/category';\nimport { getUser, GetUserResponseBody } from '../service/user';\n\ninterface OwnProps {}\n\ninterface DispatchProps {\n    saveArticleList: typeof saveArticleList;\n    saveCategoryList: typeof saveCategoryList;\n    savePublisher: typeof savePublisher;\n}\n\nconst mapDispatchToProps = {\n    saveArticleList,\n    saveCategoryList,\n    savePublisher,\n};\n\ninterface StateProps {\n    articleList: VerboseArticle[] | undefined;\n    categoryList: ICategory[] | undefined;\n    publisher: IUser | undefined;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    articleList: state.articleList.articles,\n    categoryList: state.categoryList.categories,\n    publisher: state.user.publisher,\n});\n\ntype PublisherLayoutProps = OwnProps &\n    DispatchProps &\n    StateProps &\n    RouteComponentProps<RouteParams>;\n\ninterface PublisherLayoutState {\n    ready: boolean;\n}\n\nclass PublisherLayout extends Component<PublisherLayoutProps, PublisherLayoutState> {\n    state = { ready: false };\n\n    // eslint-disable-next-line react/no-deprecated\n    componentWillMount(): void {\n        if (this.props.publisher === undefined) {\n            this.initPublisher();\n        } else if (this.props.categoryList === undefined) {\n            this.initCategoryList();\n        } else if (this.props.articleList === undefined) {\n            this.initArticleList();\n        } else {\n            this.setState({ ready: true });\n        }\n    }\n\n    initPublisher = async (): Promise<void> => {\n        const publisherId = this.props.match.params.publisherId;\n        const response = await getUser({ _id: publisherId });\n        if (response.data) {\n            const responseBody: GetUserResponseBody = response.data;\n            const publisher: IUser = responseBody.user;\n            this.props.savePublisher(publisher);\n        }\n    };\n\n    initCategoryList = async (): Promise<void> => {\n        const publisherId = this.props.match.params.publisherId;\n        const response = await getCategoryList({ user: publisherId });\n        if (response.data) {\n            const responseBody: GetCategoryListResponseBody = response.data;\n            const categoryList: ICategory[] = responseBody.categoryList;\n            this.props.saveCategoryList(categoryList);\n        }\n    };\n\n    initArticleList = async (): Promise<void> => {\n        const publisherId = this.props.match.params.publisherId;\n        const response = await getArticleList({\n            user: publisherId,\n        });\n        if (response.data) {\n            const responseBody: GetArticleListResponseBody = response.data;\n            const articleList: VerboseArticle[] = responseBody.articleList;\n            const count: number = responseBody.count;\n            this.props.saveArticleList({ articles: articleList, count });\n        }\n    };\n\n    render(): React.ReactNode {\n        if (this.state.ready) {\n            const pageName = this.props.match.params.page;\n            let pageTitle = this.props.publisher ? this.props.publisher.name : '';\n            if (pageName === pageNames.ARTICLE_LIST) {\n                pageTitle += ' - Articles';\n            } else if (pageName === pageNames.ABOUT) {\n                pageTitle += ' - About';\n            }\n            return (\n                <React.Fragment>\n                    <Helmet>\n                        <title>{pageTitle}</title>\n                    </Helmet>\n                    {this.props.children}\n                </React.Fragment>\n            );\n        } else {\n            return (\n                <React.Fragment>\n                    <Helmet>\n                        <title>Bloggy Reader</title>\n                    </Helmet>\n                    <span />;\n                </React.Fragment>\n            );\n        }\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps,\n    mapDispatchToProps\n)(PublisherLayout);\n","import { ICategory } from 'global';\n\nimport { categoryListActionTypes, SaveCategoryListAction } from './types';\n\nexport const saveCategoryList = (\n    categories: ICategory[]\n): SaveCategoryListAction => {\n    return {\n        type: categoryListActionTypes.SAVE_CATEGORY_LIST,\n        payload: { categories },\n    };\n};\n","import React from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\n\nimport ArticleDetail from '../components/ArticleDetail';\nimport ArticleList from '../components/ArticleList';\nimport Home from '../components/Home/';\nimport BaseLayout from '../layout/BaseLayout';\nimport PublisherLayout from '../layout/PublisherLayout';\nimport { pageNames, paths, RouteParams } from './constants';\n\nconst routers = [\n    {\n        path: `/${paths.PUBLISHER}/:${paths.PUBLISHER_ID}`,\n        exact: true,\n        render: (routeProps: RouteComponentProps<RouteParams>): JSX.Element => {\n            return (\n                <PublisherLayout {...routeProps}>\n                    <Home {...routeProps} />\n                </PublisherLayout>\n            );\n        },\n    },\n    {\n        path: `/${paths.PUBLISHER}/:${paths.PUBLISHER_ID}/:${paths.PAGE}`,\n        exact: true,\n        render: (routeProps: RouteComponentProps<RouteParams>): JSX.Element => {\n            switch (routeProps.match.params.page) {\n                case pageNames.HOME:\n                    return (\n                        <PublisherLayout {...routeProps}>\n                            <Home {...routeProps} />\n                        </PublisherLayout>\n                    );\n                case pageNames.ARTICLE_LIST:\n                    return (\n                        <PublisherLayout {...routeProps}>\n                            <BaseLayout {...routeProps}>\n                                <ArticleList {...routeProps} />\n                            </BaseLayout>\n                        </PublisherLayout>\n                    );\n                case pageNames.ARTICLE_DETAIL:\n                    return (\n                        <PublisherLayout {...routeProps}>\n                            <BaseLayout {...routeProps}>\n                                <ArticleDetail {...routeProps} />\n                            </BaseLayout>\n                        </PublisherLayout>\n                    );\n                case pageNames.ABOUT:\n                    return (\n                        <PublisherLayout {...routeProps}>\n                            <BaseLayout {...routeProps}>\n                                <ArticleDetail isAboutPage={true} {...routeProps} />\n                            </BaseLayout>\n                        </PublisherLayout>\n                    );\n                default:\n                    return (\n                        <PublisherLayout {...routeProps}>\n                            <Home {...routeProps} />\n                        </PublisherLayout>\n                    );\n            }\n        },\n    },\n];\n\nexport default routers;\n","import { RouterState } from 'connected-react-router';\nimport { createBrowserHistory } from 'history';\nimport cookieChecker from 'js-cookie';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Switch } from 'react-router';\nimport { HashRouter } from 'react-router-dom';\nimport { throttle } from 'throttle-debounce';\n\nimport AuthLayout from './layout/AuthLayout';\nimport LoadingLayout from './layout/LoadingLayout';\nimport { RootState, store } from './redux';\nimport { setIsMobile } from './redux/isMobile/actions';\nimport routers from './router';\nimport { isMobile } from './util/responsive';\n\ninterface OwnProps {\n    history: ReturnType<typeof createBrowserHistory>;\n}\n\ninterface DispatchProps {}\n\ninterface StateProps {\n    loading: boolean;\n    router: RouterState<unknown>;\n}\n\nconst mapStateToProps = (state: RootState): StateProps => ({\n    loading: state.loading.loading,\n    router: state.router,\n});\n\ntype AppProps = OwnProps & DispatchProps & StateProps;\n\nclass App extends Component<AppProps> {\n    // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n    resetIsMobile = () => store.dispatch(setIsMobile(isMobile()));\n\n    // eslint-disable-next-line @typescript-eslint/explicit-function-return-type\n    resize = () => throttle(500, this.resetIsMobile)();\n\n    componentDidMount(): void {\n        window.addEventListener('resize', this.resize);\n    }\n\n    componentWillUnmount(): void {\n        window.removeEventListener('resize', this.resize);\n    }\n    render(): JSX.Element {\n        console.log('cookies: ');\n        console.log(cookieChecker.get());\n        return (\n            <HashRouter>\n                <AuthLayout>\n                    <LoadingLayout>\n                        <Switch>\n                            {routers.map((r, key) => (\n                                <Route\n                                    render={r.render}\n                                    exact={r.exact}\n                                    key={key}\n                                    path={r.path}\n                                />\n                            ))}\n                        </Switch>\n                    </LoadingLayout>\n                </AuthLayout>\n            </HashRouter>\n        );\n    }\n}\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n    mapStateToProps\n)(App);\n","import './index.less';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport App from './App';\nimport { history, store } from './redux';\n\nconst render = () => {\n    ReactDOM.render(\n        <Provider store={store}>\n            <App history={history} />\n        </Provider>,\n        document.getElementById('root')\n    );\n};\n\nrender();\n"],"sourceRoot":""}